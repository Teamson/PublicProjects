!function(){"use strict";class t{constructor(){this.grade=1,this.skinArr=[1,0,0,0,0,0,0,0,0,0],this.skinParts=[8,0,0,0,0,0,0,0,0,0],this.skinId=0,this.coin=1e3,this.skinLvl=[1,1,1,1,1,1,1,1,1,1],this.skinWheel=[[1],[2],[3],[4],[5],[6],[1],[2],[3],[4]],this.wheelId=[1,2,3,4,5,6,1,2,3,4],this.skinTail=[[0],[0],[0],[0],[0],[0],[0],[0],[0],[0]],this.tailId=[0,0,0,0,0,0,0,0,0,0],this.skinColor=[[1],[1],[1],[1],[1],[1],[1],[1],[1],[1]],this.colorId=[1,1,1,1,1,1,1,1,1,1],this.isNewPlayer=!0,this.option=[1,1,1],this.driverId=0,this.skinDriverParts=[0,0,0],this.watchVideoCount=[0,0,0],this.rewardList=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],this.exp=0,this.carParts=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],this.expRewardList=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]}}class e{static getPlayerData(){return localStorage.getItem("playerData")?null==this._playerData&&(this._playerData=JSON.parse(localStorage.getItem("playerData"))):(this._playerData=new t,localStorage.setItem("playerData",JSON.stringify(this._playerData))),this._playerData}static changeCoin(t){this._playerData.coin+=t,this.setPlayerData()}static setPlayerData(){localStorage.setItem("playerData",JSON.stringify(this._playerData))}static getSkinStr(){let t="";switch(this._playerData.skinId){case 0:case 1:t="Cat_";break;case 2:t="Huga_";break;case 3:t="Shouter_"}return t}static getCostById(t){switch(t){case 0:return 0;case 1:return 400;case 2:return 500;case 3:return 600;case 4:return 700;case 5:return 800}}static getIsBossGrade(){return this._playerData.grade%2==0}}e._playerData=null,e.levelDataArr=[],e.carConfig=[],e.carUpgradeData=[{ctrl:1,spd:1,acce:1,addCtrl:.05,addSpd:.06,addAcce:.08,upgradeCost:1e3,upgradeCostStep:1e3},{ctrl:.95,spd:1.1,acce:1.05,addCtrl:.06,addSpd:.05,addAcce:.05,upgradeCost:1500,upgradeCostStep:1e3},{ctrl:1.05,spd:1.05,acce:1.1,addCtrl:.03,addSpd:.08,addAcce:.04,upgradeCost:2e3,upgradeCostStep:1e3},{ctrl:.9,spd:1.1,acce:1.05,addCtrl:.015,addSpd:.05,addAcce:.05,upgradeCost:2500,upgradeCostStep:1e3},{ctrl:1,spd:1.1,acce:1.15,addCtrl:.04,addSpd:.06,addAcce:.03,upgradeCost:3e3,upgradeCostStep:1e3},{ctrl:1.05,spd:1.02,acce:1.08,addCtrl:.01,addSpd:.05,addAcce:.07,upgradeCost:3500,upgradeCostStep:1e3},{ctrl:1.05,spd:1.1,acce:1.08,addCtrl:.05,addSpd:.05,addAcce:.1,upgradeCost:4e3,upgradeCostStep:1e3},{ctrl:1.02,spd:1.15,acce:1.12,addCtrl:.02,addSpd:.08,addAcce:.05,upgradeCost:4500,upgradeCostStep:1e3},{ctrl:1.2,spd:1.3,acce:1.25,addCtrl:.05,addSpd:.05,addAcce:.1,upgradeCost:5e3,upgradeCostStep:1e3},{ctrl:1.15,spd:1.25,acce:1.3,addCtrl:.05,addSpd:.05,addAcce:.05,upgradeCost:5500,upgradeCostStep:1e3}],e.driverUpgradeData=[{ctrl:.13,spd:.1,acce:.12,addCtrl:.02,addSpd:.01,addAcce:.01,grade:"286",name:"露西"},{ctrl:.1,spd:.12,acce:.11,addCtrl:.01,addSpd:.01,addAcce:.015,grade:"279",name:"艾薇莉"},{ctrl:.15,spd:.1,acce:.1,addCtrl:.01,addSpd:.015,addAcce:.01,grade:"301",name:"玛丽儿"}];class s{static LoginWx(t){if(!Laya.Browser.onWeiXin)return;let e=Laya.Browser.window.wx.getLaunchOptionsSync();Laya.Browser.window.wx.login({success(s){s.code&&(console.log("res.code:",s.code),t&&t(s.code,e.query))}})}static GetLaunchParam(t){Laya.Browser.onWeiXin&&(this.OnShowFun=t,t(this.GetLaunchPassVar()),Laya.Browser.window.wx.onShow(t=>{null!=this.OnShowFun&&this.OnShowFun(t),console.log("wx on show")}))}static GetLaunchPassVar(){return Laya.Browser.onWeiXin?Laya.Browser.window.wx.getLaunchOptionsSync():null}static WxOnHide(t){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onHide(t)}static WxOffHide(t){t&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offHide(t)}static WxOnShow(t){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(t)}static WxOffShow(t){t&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(t)}static httpRequest(t,e,s="get",i){var a=new Laya.HttpRequest;a.http.timeout=5e3,a.once(Laya.Event.COMPLETE,this,i),a.once(Laya.Event.ERROR,this,this.httpRequest,[t,e,s,i]),"get"==s?a.send(t+"?"+e,"",s,"text"):"post"==s&&a.send(t,JSON.stringify(e),s,"text")}static DoVibrate(t=!0){e.getPlayerData().option[2]&&Laya.Browser.onWeiXin&&this.isVibrate&&(t?Laya.Browser.window.wx.vibrateShort():Laya.Browser.window.wx.vibrateLong())}static OpenAlert(t,e=2e3,s=!1){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.showToast({title:t,duration:e,mask:!1,icon:s?"success":"none"})}static preViewImage(t){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.previewImage({current:t,urls:[t]})}}s.UnityPath="LayaScene_SampleScene/Conventional/",s.version="",s.isVibrate=!0,s.isMusic=!0,s.OnShowFun=null;class i{constructor(){this.effectArr=[],this.format=".mp3"}static get instance(){return this._instance||(this._instance=new i),this._instance}initLoading(t){var e=[{url:"res/Sounds/bgm.mp3",type:Laya.Loader.SOUND}];Laya.loader.load(e,Laya.Handler.create(this,t)),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)}playMusic(t,s=0,i){e.getPlayerData().option[0]&&Laya.SoundManager.playMusic("res/Sounds/"+t+this.format,s,new Laya.Handler(this,i))}stopMusic(){Laya.SoundManager.stopMusic()}playSoundEffect(t,s=1,i,a,n){if(e.getPlayerData().option[1])return Laya.SoundManager.playSound("res/Sounds/"+t+this.format,s,new Laya.Handler(this,i),a,n)}stopSound(t){Laya.SoundManager.stopSound("res/Sounds/"+t+this.format)}}class a{static calcDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static getWorldDis(t,e){let s=t.transform.position.clone(),i=e.transform.position.clone();return Laya.Vector3.distance(s,i)}static getDirectionAToB(t,e,s=!0){let i=t.transform.position.clone(),a=e.transform.position.clone(),n=new Laya.Vector3(0,0,0);return Laya.Vector3.subtract(a,i,n),s&&Laya.Vector3.normalize(n,n),n}static fixPosY(t,e=1334){return t*Laya.stage.displayHeight/e}static findNodeByName(t,e){let s=null,i=t=>{for(let a=0;a<t.numChildren;a++){if(t.getChildAt(a).name==e)return void(s=t.getChildAt(a));i(t.getChildAt(a))}};return i(t),s}static TmoveTo(t,e,s,i,a){if(!t.transform)return;let n=new Laya.Tween;var o=t.transform.position;n.to(t.transform.position,{x:s.x,y:s.y,z:s.z,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.position=o)})},e,a,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToYZ(t,e,s,i,a){if(!t.transform)return;let n=new Laya.Tween;var o=t.transform.position;return n.to(t.transform.position,{y:s.y,z:s.z,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.position=o)})},e,null,Laya.Handler.create(this,()=>{i&&i()})),n}static TmoveToX(t,e,s,i,a){if(!t.transform)return;let n=new Laya.Tween;var o=t.transform.localPosition;n.to(t.transform.localPosition,{x:s.x,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.localPosition=o)})},e,null,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToY(t,e,s,i,a){if(!t.transform)return;let n=new Laya.Tween;var o=t.transform.localPosition;n.to(t.transform.localPosition,{y:s.y,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.localPosition=o)})},e,a,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToWorld(t,e,s,i,a){if(!t.transform)return;let n=new Laya.Tween;var o=t.transform.position;n.to(t.transform.position,{y:s.y,update:new Laya.Handler(this,()=>{t.transform&&(t.transform.position=o)})},e,null,Laya.Handler.create(this,()=>{i&&i()}))}static RotateWithPoint(t,e,s){let i=new Laya.Vector3,a=t.transform.localPosition.clone();return s=s*Math.PI/180,i.x=a.x*Math.cos(s)+(e.y*a.z-e.z*a.y)*Math.sin(s)+e.x*(e.x*a.x+e.y*a.y+e.z*a.z)*(1-Math.cos(s)),i.y=a.y*Math.cos(s)+(e.x*a.z-e.z*a.x)*Math.sin(s)+e.y*(e.x*a.x+e.y*a.y+e.z*a.z)*(1-Math.cos(s)),i.z=a.z*Math.cos(s)+(e.x*a.y-e.y*a.x)*Math.sin(s)+e.z*(e.x*a.x+e.y*a.y+e.z*a.z)*(1-Math.cos(s)),i}static RotateTo(t,e,s,i){var a=t.transform.rotationEuler;Laya.Tween.to(t.transform.rotationEuler,{x:s.x,y:s.y,z:s.z,update:new Laya.Handler(this,function(){t&&(t.transform.rotationEuler=a)})},e,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){i&&i()}))}static ScaleTo(t,e,s,i){var a=t.transform.localScale;Laya.Tween.to(t.transform.localScale,{x:s.x,y:s.y,z:s.z,update:new Laya.Handler(this,function(){t&&(t.transform.localScale=a)})},e,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){i&&i()}))}static tMove2D(t,e,s,i,a){Laya.Tween.to(t,{x:e,y:s},i,null,new Laya.Handler(this,()=>{a&&a()}))}static scaleTo2D(t,e,s,i){Laya.Tween.to(t,{scaleX:e,scaleY:e},s,null,new Laya.Handler(this,()=>{i&&i()}))}static alphaTo2D(t,e,s,i){Laya.Tween.to(t,{alpha:e},s,null,new Laya.Handler(this,()=>{i&&i()}))}static updateNumber(t,e,s,i=!0,a,n){let o=t*e,r=Math.floor((o-t)/60);r=r<=0?1:r;let h=()=>{a?((t+=r)>=o&&(t=o,n&&n(),Laya.timer.clear(this,h)),i?s.text=t.toString():s.value=t.toString()):((o-=r)<=t&&(o=t,n&&n(),Laya.timer.clear(this,h)),i?s.text=o.toString():s.value=o.toString())};Laya.timer.frameLoop(1,this,h)}static loadJson(t,e){Laya.loader.load(t,Laya.Handler.create(this,e),null,Laya.Loader.JSON)}static objectShake(t,e=1,s=.7){var i=e,a=1,n=t.transform.localPosition.clone();Laya.timer.frameLoop(1,this,function updateShake(){if(i>0){var e=new Laya.Vector3;Laya.Vector3.scale((o=Math.random()>.5?Math.random():-Math.random(),r=Math.random()>.5?Math.random():-Math.random(),new Laya.Vector3(o,r,0)),s,e),Laya.Vector3.add(n,e,e),t.transform.localPosition=e,i-=.02*a}else i=0,t.transform.localPosition=n,Laya.timer.clear(this,updateShake);var o,r})}static getRandomItemInArr(t){return t[Math.floor(Math.random()*t.length)]}static shuffleArr(t){let e=t.length;for(;e;){let s=Math.floor(Math.random()*e--);[t[s],t[e]]=[t[e],t[s]]}return t}static GetRandom(t,e,s=!0){let i=e-t,a=Math.random()*(i+1);return a+=t,s?Math.floor(a):a}static coinCollectAnim(t,e,s,i=10,a){let n=i;for(var o=0;o<i;o++){let i=Laya.Pool.getItemByClass("coin",Laya.Image);i.skin="startUI/zy_zs_1.png",i.x=t.x,i.y=t.y,s.addChild(i);let o=300+100*Math.random()-50;Laya.Tween.to(i,{x:i.x+250*Math.random()-125,y:i.y+250*Math.random()-125},o),Laya.timer.once(o+50,this,function(){Laya.Tween.to(i,{x:e.x,y:e.y},400,null,new Laya.Handler(this,function(){s.removeChild(i),Laya.Pool.recover("coin",i),0==--n&&a&&a()}))})}}static scaleLoop(t,e,s){Laya.Tween.to(t,{scaleX:e,scaleY:e},s,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{scaleX:1,scaleY:1},s,null,new Laya.Handler(this,()=>{this.scaleLoop(t,e,s)}))}))}static rotateLoop(t,e,s){Laya.Tween.to(t,{rotation:e},s,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{rotation:-e},2*s,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{rotation:0},s,null,new Laya.Handler(this,()=>{this.rotateLoop(t,e,s)}))}))}))}static visibleDelay(t,e){t.visible=!1,Laya.timer.once(e,this,()=>{t.visible=!0})}static pointInPolygon(t,e){for(var s=t.x,i=t.y,a=!1,n=0,o=e.length-1;n<e.length;o=n++){var r=e[n].x,h=e[n].y,l=e[o].x,d=e[o].y;h>i!=d>i&&s<(l-r)*(i-h)/(d-h)+r&&(a=!a)}return a}static getSprite3DResByUrl(t,e,i=!1){let a=Laya.loader.getRes(s.UnityPath+t);return Laya.Sprite3D.instantiate(a,e,i,new Laya.Vector3(0,0,0))}static getRandomItemInArrWithoutSelf(t,e,s=1){let i=[].concat(e);return i.splice(i.indexOf(t),1),(i=this.shuffleArr(i)).slice(0,s)}static getBoundBox(t,e=!1){let s=t.getComponent(Laya.PhysicsCollider).colliderShape,i=t.transform.position.clone();i.x+=s.localOffset.x,i.y+=s.localOffset.y,i.z+=s.localOffset.z;let a=t.parent,n=1;a&&a.transform&&e&&(n=a.transform.localScaleZ);let o=new Laya.Vector3(i.x-s.sizeX/2,i.y-s.sizeY/2,i.z-s.sizeZ/2),r=new Laya.Vector3(i.x+s.sizeX/2,i.y+s.sizeY/2,i.z+s.sizeZ*n/2/2);return new Laya.BoundBox(o,r)}static getBoundBoxWithMinMax(t,e){return new Laya.BoundBox(t,e)}static addClickEvent(t,e,s,a,n=!0){if(t.offAllCaller(e),t instanceof Laya.Button&&!n){let i=t=>{s&&s.call(e,t)};t.on(Laya.Event.CLICK,e,i,[a])}else{let o=60,r=1,h=t.scaleX*r,l=t.scaleY*r,d=.9*r,c=!1,f=e=>{c=!0,n&&Laya.Tween.to(t,{scaleX:d,scaleY:d},o)};t.on(Laya.Event.MOUSE_DOWN,e,f,[a]);let m=a=>{0!=c&&(c=!1,n?Laya.Tween.to(t,{scaleX:h,scaleY:l},o,null,new Laya.Handler(e,()=>{s&&s.call(e,a),i.instance.playSoundEffect("Click")})):(s&&s.call(e,a),i.instance.playSoundEffect("Click")))};t.on(Laya.Event.MOUSE_UP,e,m,[a]);let y=e=>{n&&Laya.Tween.to(t,{scaleX:h,scaleY:l},o)};t.on(Laya.Event.MOUSE_OUT,e,y,[a])}}static getVector3(t,e,s){return new Laya.Vector3(Number(t),Number(e),Number(s))}}class n{}n.IsLoadJSON=!1,n.LevelCount=5,n.LevelDistanceOffSet=[0,0,0],n.LevelOffset=[0,0,10,0,0],n.LevelConfig=[[{type:"Start",distance:70,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:480,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Finish",distance:2472,offsetX:4,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:135,offsetX:-1.2,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:250,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:450,offsetX:-1.2,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:750,offsetX:1.1,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:1500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:1950,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:2e3,offsetX:-.5,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2150,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:2280,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2250,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:1350,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:2300,offsetX:4,nextOffset:{x:0,dis:0},amount:1},{type:"BasketBall",distance:590,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"FootBall",distance:593,offsetX:-1.5,nextOffset:{x:3,dis:0},amount:2},{type:"Tyres",distance:800,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tyres",distance:802,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Accelerator_0",distance:290,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_1",distance:990,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_0",distance:1120,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:2160,offsetX:0,nextOffset:{x:0,dis:0},amount:1}],[{type:"Start",distance:70,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid2",distance:1e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid2",distance:2220,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:4200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:5200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Finish",distance:6288,offsetX:4,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:240,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:290,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:980,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tyres",distance:1100,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Torture",distance:1180,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:1250,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Cone",distance:1300,offsetX:-3.2,nextOffset:{x:1.5,dis:0},amount:6},{type:"Tonnel",distance:1338,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:1500,offsetX:-3,nextOffset:{x:3,dis:5},amount:4},{type:"Airscrew",distance:1600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:1720,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"BasketBall",distance:1750,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tonnel",distance:1780,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1860,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:1920,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:2e3,offsetX:-3,nextOffset:{x:2,dis:2},amount:4},{type:"BasketBall",distance:2010,offsetX:-3,nextOffset:{x:2,dis:2},amount:4},{type:"Torture",distance:2050,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:2300,offsetX:-2,nextOffset:{x:2,dis:2},amount:4},{type:"BasketBall",distance:2320,offsetX:-2,nextOffset:{x:2,dis:2},amount:4},{type:"Airscrew",distance:2400,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:2600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:2650,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:2653,offsetX:-1,nextOffset:{x:2,dis:0},amount:2},{type:"Skittle",distance:2656,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Skittle",distance:2659,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tonnel",distance:2880,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:3e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:3260,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:3600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:3700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:3900,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:4050,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:4350,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:4353,offsetX:-1,nextOffset:{x:2,dis:0},amount:2},{type:"Skittle",distance:4356,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Skittle",distance:4359,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tyres",distance:4500,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Airscrew",distance:4650,offsetX:10,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:4800,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Torture",distance:4840,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:4900,offsetX:-3.2,nextOffset:{x:1.5,dis:0},amount:6},{type:"Airscrew",distance:5e3,offsetX:10,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:5100,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:5160,offsetX:-3.5,nextOffset:{x:1.5,dis:0},amount:6},{type:"Torture",distance:5400,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:5600,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Torture",distance:5640,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:5800,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Cone",distance:5900,offsetX:-3.8,nextOffset:{x:1.2,dis:0},amount:6},{type:"Airscrew",distance:6e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:6100,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:6080,offsetX:-4,nextOffset:{x:1,dis:0},amount:9},{type:"Tyres",distance:6076,offsetX:-4,nextOffset:{x:1,dis:0},amount:9},{type:"Hammer",distance:6100,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:6200,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_0",distance:480,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:930,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_0",distance:1290,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:1926,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_0",distance:2220,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:2480,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_1",distance:2848,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:3272,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_0",distance:3659,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:4083,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_0",distance:4249,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:4692,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:180,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:200,offsetX:1.5,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:220,offsetX:-1.5,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:670,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:1050,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:1700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:2800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2900,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:3300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:3550,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:3650,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:4610,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:5230,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5840,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5680,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5750,offsetX:-1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5750,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5750,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:6150,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:3500,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:2200,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:4e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:5940,offsetX:1,nextOffset:{x:0,dis:0},amount:1}],[{type:"Start",distance:70,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:2800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:4e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:7e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid2",distance:5e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Finish",distance:7778,offsetX:4,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:880,offsetX:-3,nextOffset:{x:2.5,dis:0},amount:3},{type:"FootBall",distance:900,offsetX:-6,nextOffset:{x:2.5,dis:0},amount:5},{type:"BasketBall",distance:920,offsetX:-8,nextOffset:{x:2.5,dis:0},amount:7},{type:"Airscrew",distance:1e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1250,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1350,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:1500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:1600,offsetX:0,nextOffset:{x:0,dis:16},amount:8},{type:"Airscrew",distance:2100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:2e3,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tyres",distance:2006,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tyres",distance:2012,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Airscrew",distance:2200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:2400,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Tyres",distance:2404,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Tonnel",distance:2550,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:2780,offsetX:-4,nextOffset:{x:1.5,dis:0},amount:6},{type:"Hammer",distance:3200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:3980,offsetX:-4,nextOffset:{x:1.5,dis:0},amount:6},{type:"Hammer",distance:4100,offsetX:3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:4100,offsetX:-3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:4300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:4600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:4700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:4980,offsetX:-4,nextOffset:{x:1.5,dis:0},amount:6},{type:"Airscrew",distance:5300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:5600,offsetX:0,nextOffset:{x:0,dis:8},amount:6},{type:"Airscrew",distance:5700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:5800,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:6e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tonnel",distance:6200,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:6500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:7100,offsetX:-1,nextOffset:{x:0,dis:14},amount:8},{type:"Airscrew",distance:7150,offsetX:-10,nextOffset:{x:0,dis:0},amount:1},{type:"BasketBall",distance:7200,offsetX:0,nextOffset:{x:0,dis:16},amount:8},{type:"Skittle",distance:7350,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:7353,offsetX:-1,nextOffset:{x:2,dis:0},amount:2},{type:"Skittle",distance:7356,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Skittle",distance:7359,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Cone",distance:7570,offsetX:-3,nextOffset:{x:1,dis:0},amount:8},{type:"Cone",distance:7576,offsetX:-3,nextOffset:{x:1,dis:0},amount:8},{type:"Hammer",distance:7600,offsetX:4,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:7600,offsetX:-4,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_1",distance:660,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:1486,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_1",distance:2472,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:2690,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_1",distance:5662,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:6290,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:350,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:1450,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:2950,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:3900,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:5200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:7050,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:7650,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:210,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:210,offsetX:-1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:1800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2850,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:3600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:4600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5400,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:6520,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7700,offsetX:-1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7700,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7720,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7720,offsetX:-1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7720,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:1e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:3e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:5e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:7300,offsetX:0,nextOffset:{x:0,dis:0},amount:1}],[{type:"Start",distance:70,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:480,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:2800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:4e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid2",distance:3510,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Finish",distance:4817,offsetX:4,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:200,offsetX:0,nextOffset:{x:0,dis:5},amount:6},{type:"Cone",distance:250,offsetX:0,nextOffset:{x:0,dis:5},amount:6},{type:"Cone",distance:300,offsetX:0,nextOffset:{x:0,dis:5},amount:6},{type:"Hurdle",distance:500,offsetX:3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:600,offsetX:-3.5,nextOffset:{x:0,dis:5},amount:6},{type:"Hurdle",distance:700,offsetX:3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:800,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:880,offsetX:-2,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:1200,offsetX:-2,nextOffset:{x:0,dis:16},amount:8},{type:"Airscrew",distance:1500,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:2e3,offsetX:0,nextOffset:{x:0,dis:5},amount:6},{type:"Airscrew",distance:2300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:2500,offsetX:2,nextOffset:{x:0,dis:16},amount:8},{type:"Tyres",distance:2780,offsetX:-5,nextOffset:{x:1.5,dis:0},amount:10},{type:"Cone",distance:2850,offsetX:0,nextOffset:{x:0,dis:5},amount:6},{type:"Airscrew",distance:2910,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:3500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:3503,offsetX:-1,nextOffset:{x:2,dis:0},amount:2},{type:"Skittle",distance:3506,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Skittle",distance:3509,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Hammer",distance:3900,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:4100,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:4200,offsetX:-5,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:4200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:4200,offsetX:5,nextOffset:{x:0,dis:0},amount:1},{type:"Hurdle",distance:4300,offsetX:3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:4350,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:4400,offsetX:0,nextOffset:{x:0,dis:5},amount:6},{type:"Hurdle",distance:4500,offsetX:-3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:4600,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:4602,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:4700,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:470,offsetX:-2.5,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:2200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:2800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:3750,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:4650,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:320,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:1600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2750,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:3200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:3600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:4e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:4200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:1500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:3100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:4550,offsetX:1.5,nextOffset:{x:0,dis:0},amount:1}],[{type:"Start",distance:70,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:400,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:4100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid2",distance:5100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Mid",distance:8e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Finish",distance:9191,offsetX:4,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:203,offsetX:-1,nextOffset:{x:2,dis:0},amount:2},{type:"Skittle",distance:206,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Skittle",distance:209,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Tyres",distance:380,offsetX:-6,nextOffset:{x:1.5,dis:0},amount:9},{type:"Tyres",distance:390,offsetX:-6,nextOffset:{x:1.5,dis:0},amount:9},{type:"Airscrew",distance:850,offsetX:-2,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:1e3,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:1400,offsetX:3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:1400,offsetX:-3.5,nextOffset:{x:-1,dis:0},amount:1},{type:"Cone",distance:1600,offsetX:-3,nextOffset:{x:0,dis:6},amount:6},{type:"Tyres",distance:1600,offsetX:0,nextOffset:{x:0,dis:6},amount:6},{type:"Cone",distance:1600,offsetX:3,nextOffset:{x:0,dis:6},amount:6},{type:"FootBall",distance:1900,offsetX:2,nextOffset:{x:0,dis:16},amount:8},{type:"BasketBall",distance:1900,offsetX:-2,nextOffset:{x:0,dis:16},amount:8},{type:"Torture",distance:2200,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:2300,offsetX:0,nextOffset:{x:0,dis:16},amount:8},{type:"Torture",distance:2450,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:2500,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:2750,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:2850,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:2900,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:3100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:3500,offsetX:3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:3500,offsetX:-3.5,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:4e3,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Airscrew",distance:4300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Cone",distance:4950,offsetX:-3,nextOffset:{x:1.5,dis:0},amount:6},{type:"Cone",distance:5e3,offsetX:-3,nextOffset:{x:1.5,dis:0},amount:6},{type:"Skittle",distance:5200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:5203,offsetX:-1,nextOffset:{x:2,dis:0},amount:2},{type:"Skittle",distance:5206,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Skittle",distance:5209,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Airscrew",distance:5450,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:5900,offsetX:3,nextOffset:{x:0,dis:16},amount:8},{type:"BasketBall",distance:5900,offsetX:0,nextOffset:{x:0,dis:16},amount:8},{type:"FootBall",distance:5900,offsetX:-3,nextOffset:{x:0,dis:16},amount:8},{type:"Hammer",distance:6400,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"FootBall",distance:6800,offsetX:3,nextOffset:{x:0,dis:12},amount:4},{type:"FootBall",distance:6800,offsetX:-3,nextOffset:{x:0,dis:12},amount:4},{type:"BasketBall",distance:7200,offsetX:0,nextOffset:{x:0,dis:12},amount:8},{type:"Skittle",distance:7950,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Skittle",distance:7953,offsetX:-1,nextOffset:{x:2,dis:0},amount:2},{type:"Skittle",distance:7956,offsetX:-2,nextOffset:{x:2,dis:0},amount:3},{type:"Skittle",distance:7959,offsetX:-3,nextOffset:{x:2,dis:0},amount:4},{type:"Torture",distance:8150,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:8110,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:8300,offsetX:-6,nextOffset:{x:1.5,dis:0},amount:9},{type:"Hammer",distance:8400,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:8500,offsetX:-6,nextOffset:{x:1.5,dis:0},amount:9},{type:"Hammer",distance:8600,offsetX:6,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:8600,offsetX:-6,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:8700,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Torture",distance:8705,offsetX:-3,nextOffset:{x:0,dis:0},amount:1},{type:"Tyres",distance:8950,offsetX:-6,nextOffset:{x:1.5,dis:0},amount:9},{type:"Hammer",distance:9050,offsetX:6,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:9050,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Hammer",distance:9050,offsetX:-6,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_3",distance:1725,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:2149,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_3",distance:3131,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:3302,offsetX:3,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_3",distance:6566,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Accelerator_2",distance:7584,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:1500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:2260,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:4500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:6500,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:8450,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:9100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Gas",distance:9100,offsetX:2.5,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:8650,offsetX:-2,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:8650,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:8650,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7500,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7400,offsetX:1,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:7300,offsetX:2,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:6600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:6900,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:5400,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:4100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:4e3,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:3200,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:2100,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:1600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Money",distance:800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:1300,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:2580,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:3900,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:6600,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:8800,offsetX:0,nextOffset:{x:0,dis:0},amount:1},{type:"Chest",distance:9150,offsetX:0,nextOffset:{x:0,dis:0},amount:1}]],n.upgradeConfig=[[400,500],[400,500],[400,500],[400,500],[400,500],[400,500]],n.tryDriverId=0;class o{static add(t,e){var s=new Laya.Vector3;return Laya.Vector3.add(t,e,s),s.clone()}static subtract(t,e){var s=new Laya.Vector3;return Laya.Vector3.subtract(t,e,s),s.clone()}static mull(t,e){var s=new Laya.Vector3;return Laya.Vector3.scale(t,e,s),s.clone()}static dot(t,e){return Laya.Vector3.dot(t,e)}static cross(t,e){var s=new Laya.Vector3;return Laya.Vector3.cross(t,e,s),s.clone()}static normalized(t){var e=new Laya.Vector3;return Laya.Vector3.normalize(t,e),e.clone()}static distance(t,e){var s=o.subtract(t,e);return Laya.Vector3.scalarLength(s)}}class r{static D3CloneObj(t,e){let s=t.clone();return e&&e.addChild(s),s}static D3LoadTexture2D(t,e){Laya.Texture2D.load(t,Laya.Handler.create(null,t=>{e(t)}))}static D3SetMaterialTexture(t,e){this.D3LoadTexture2D(e,e=>{t.albedoTexture=e})}static D3FindNodeByName(t,e){let s=null,i=t=>{for(let a=0;a<t.numChildren;a++){if(t.getChildAt(a).name==e)return void(s=t.getChildAt(a));i(t.getChildAt(a))}};return i(t),s}static D3Vec3ToVec2(t,e){let s=new Laya.Vector3;t.transform.getForward(s),Laya.Vector3.normalize(s,s);let i=o.subtract(e,t.transform.position);if(this.d3_getAngle(s,i)>90)return null;var a=new Laya.Vector4;t.viewport.project(e,t.projectionViewMatrix,a);var n=new Laya.Vector2(a.x/Laya.stage.clientScaleX,a.y/Laya.stage.clientScaleY);return new Laya.Vector2(n.x,n.y)}static D3GetRgbaByHex(t){var e=[],s=[];let i=t.replace(/#/,"");if(3==i.length){for(var a=[],n=0;n<3;n++)a.push(i.charAt(n)+i.charAt(n));i=a.join("")}for(n=0;n<3;n++)e[n]="0x"+i.substr(2*n,2),s.push(parseInt(e[n]));return new Laya.Vector4(s[0]/255,s[1]/255,s[2]/255,1)}static d3_getAngle(t,e){var s=Laya.Vector3.dot(t,e),i=Laya.Vector3.scalarLength(t)*Laya.Vector3.scalarLength(e);if(0==i){if(t.z>e.z)return 0;if(t.z<e.z)return 180;if(t.y>e.y)return 90;if(t.y<e.y)return-90}var a=s/i;return 180*Math.acos(a)/Math.PI}static getCoinPoints(t,e,s=1.8,i=-10,a=30,n,o){for(var r=[],h=0,l=e.y,d=new Laya.Vector3,c=new Laya.Vector3(-(e.x-t.x)/s,(e.y-t.y)/s-.5*i*s,(e.z-t.z)/s),f=t;f.y>=l;){d.y=i*(h+=.02);let t=new Laya.Vector3;Laya.Vector3.add(c,d,t),Laya.Vector3.scale(t,.02,t),Laya.Vector3.add(f,t,t),f=t,r.push(t)}return[r,this.showCoin(r,a,n,o)]}static showCoin(t,e,s,i){for(var a=[],n=0,o=(Math.random(),t=>{let e=Laya.Sprite3D.instantiate(s);i.addChild(e),e.transform.position=t,e.transform.setWorldLossyScale(new Laya.Vector3(2,2,2)),a.push(e)}),r=0;r<t.length;r++)n!=e&&r%10==0&&(o(t[r]),n++);return a}static D3ObjectShake(t,e=1,s=.7){var i=e,a=1,n=t.transform.localPosition.clone();Laya.timer.frameLoop(1,this,function updateShake(){if(i>0){var e=new Laya.Vector3;Laya.Vector3.scale((o=Math.random()>.5?Math.random():-Math.random(),r=Math.random()>.5?Math.random():-Math.random(),new Laya.Vector3(o,r,0)),s,e),Laya.Vector3.add(n,e,e),t.transform.localPosition=e,i-=.02*a}else i=0,t.transform.localPosition=n,Laya.timer.clear(this,updateShake);var o,r})}static clearMask(t){t.mask&&(t.mask.graphics.clear(),t.destroy())}static getAngle(t,e,s){let i=o.subtract(t,e);i.y=0;let a=o.subtract(e,s);return a.y=0,this.d3_getAngle(i,a)}static getTimeLeft2BySecond(t,e=":"){let s=Math.round((t-30)/60),i=t%60,a=i.toFixed(3).split(".")[1];var n=i>10?i.toFixed(0)+e:"0"+i.toFixed(0)+e;return n=="010"+e?n="10"+e:n=="60"+e&&(n="00"+e,s+=1),(s>0?s>9?s+e:"0"+s+e:"00"+e)+(i>0?n+"":"00"+e)+a}}class h extends Laya.Script3D{constructor(){super(...arguments),this.smoothRoute=!0,this.substeps=100,this.allPointVec3=[],this.allRotVec3=[],this.p0n=0,this.p1n=0,this.p2n=0,this.p3n=0,this.i=0,this.p0=new Laya.Vector3,this.p1=new Laya.Vector3,this.p2=new Laya.Vector3,this.p3=new Laya.Vector3,this.upTarget=new Laya.Sprite3D}get length(){return this._length}set length(t){this._length=t}v3Add(t,e){var s=new Laya.Vector3;return Laya.Vector3.add(t,e,s),s}v3Subtract(t,e){var s=new Laya.Vector3;return Laya.Vector3.subtract(t,e,s),s}v3Scale(t,e){var s=new Laya.Vector3;return Laya.Vector3.scale(t,e,s),s}cachePositionsAndDistances(){this.points=[],this.distances=[];for(var t=0,e=0;e<this.allPointVec3.length+1;e++){var s=this.allPointVec3[e%this.allPointVec3.length],i=this.allPointVec3[(e+1)%this.allPointVec3.length];if(s&&i){var a=s,n=i;this.points[e]=this.allPointVec3[e%this.allPointVec3.length],this.distances[e]=t;var o=new Laya.Vector3;Laya.Vector3.subtract(a,n,o),e<this.allPointVec3.length-1&&(t+=Laya.Vector3.scalarLength(o))}}this.accumulateDistance=t,this.owner.addChild(this.upTarget)}getUpDirection(t){var e=0;for(this.length=this.distances[this.distances.length-1],t%=this.length;this.distances[e]<t;)++e;e>this.allRotVec3.length-1&&(e=1);var s=new Laya.Vector3;return this.upTarget.transform.position=this.allPointVec3[e].clone(),this.upTarget.transform.rotationEuler=this.allRotVec3[e].clone(),this.upTarget.transform.getUp(s),s}getRouteAngle(t){let e=this.getRountePosition(t),s=this.getRountePosition(t+1),i=this.getRountePosition(t+2),a=(e.z-s.z)*i.x+(s.x-e.x)*i.z+e.x*s.z-s.x*e.z;return[r.getAngle(e,s,i),a<0]}getRoutePoint(t){var e=this.getRountePosition(t),s=this.getRountePosition(t+10),i=new Laya.Vector3,a=this.v3Subtract(e,s);return Laya.Vector3.normalize(a,i),new l(e,i)}getRountePosition(t){var e=0;for(this.length=this.distances[this.distances.length-1],t%=this.length;this.distances[e]<t;)++e;if(this.p1n=(e-1+this.numPoints)%this.numPoints,this.p2n=e,this.i=this.inverseLerp(this.distances[this.p1n],this.distances[this.p2n],t),this.smoothRoute)return this.p0n=(e-2+this.numPoints)%this.numPoints,this.p3n=(e+1)%this.numPoints,this.p2n%=this.numPoints,this.p0=this.points[this.p0n],this.p1=this.points[this.p1n],this.p2=this.points[this.p2n],this.p3=this.points[this.p3n],this.catmullRom(this.p0,this.p1,this.p2,this.p3,this.i);this.p1n=(e-1+this.numPoints)%this.numPoints,this.p2n=e;var s=new Laya.Vector3;return Laya.Vector3.lerp(this.points[this.p1n],this.points[this.p2n],this.i,s),s}catmullRom(t,e,s,i,a){var n=this.v3Scale(this.p1,2),o=this.v3Scale(this.v3Subtract(this.p2,this.p0),this.i),r=this.v3Scale(this.p0,2),h=this.v3Scale(this.p1,5),l=this.v3Scale(this.p2,4),d=this.v3Add(this.v3Subtract(r,h),l),c=(d=this.v3Subtract(d,this.p3),this.v3Scale(d,Math.pow(this.i,2))),f=this.v3Scale(this.p1,3),m=this.v3Scale(this.p2,3),y=this.v3Subtract(f,this.p0);y=this.v3Subtract(y,m),y=this.v3Add(y,this.p3);var p=this.v3Scale(y,Math.pow(this.i,3));return this.v3Scale(this.v3Add(this.v3Add(this.v3Add(n,o),c),p),.5)}assignUsingAllChildObjects(){for(var t=[],e=this.owner,s=0;s<e.numChildren;s++)t[s]=e.getChildAt(s)}inverseLerp(t,e,s){return(s-t)/(e-t)}init(){this.allPointVec3.length>1&&this.cachePositionsAndDistances(),this.numPoints=this.allPointVec3.length}}class l{constructor(t,e){this.position=t,this.direction=e}}class d extends Laya.Script3D{constructor(){super(...arguments),this.lookAheadForTargetOffset=1,this.lookAheadForTargetFactor=.1,this.lookAheadForSpeedOffset=1,this.lookAheadForSpeedFactor=.001,this.isSmoothAlongRoute=!0,this.progressDistance=0,this.speedFactor=0,this.progressNum=0,this.lastPosition=new Laya.Vector3,this.speed=0,this.oriY=0,this.curRoadIndex=-1,this.roadConfig=[{roadWidth:3.5,roadType:0},{roadWidth:5,roadType:1},{roadWidth:5.5,roadType:2},{roadWidth:5,roadType:0}]}onAwake(){this.self=this.owner,this.target=this.self.transform}init(t=0,e=0){this.speed=0,this.reset(0,Math.random()*e+t)}recalcPos(){this.role||(this.role=this.self.getChildAt(0),this.oriY=this.role.transform.localPosition.y);let t=K.Share.configPaths,e=!1;for(let s=t.length-1;s>=0;s--)if(this.progressDistance>t[s][2]){e=!0,this.setRoadConfig(t[s][1]);break}e||this.setRoadConfig(0);let s=this.role.transform.localPosition.clone();s.y=this.getY(s)+this.oriY,this.role.transform.localPosition=s,this.ctrlCarLR(s)}reset(t=0,e=5){if(this.circuit)if(this.progressNum=t,this.progressDistance=e,this.isSmoothAlongRoute){this.target.position=this.circuit.getRoutePoint(this.progressDistance+this.lookAheadForTargetOffset*this.speedFactor+this.lookAheadForTargetFactor*this.speed).position;let t=new Laya.Quaternion,e=this.circuit.getRoutePoint(this.progressDistance+this.lookAheadForSpeedOffset+this.lookAheadForSpeedFactor*this.speed).direction,s=this.circuit.getUpDirection(this.progressDistance+this.lookAheadForSpeedOffset+this.lookAheadForSpeedFactor*this.speed);Laya.Quaternion.rotationLookAt(e,s,t),Laya.Quaternion.invert(t,t),this.target.rotation=t,this.lastPosition=this.target.position.clone()}else this.target.position=this.circuit.allPointVec3[this.progressNum].clone(),this.target.rotation=this.circuit.allRotVec3[this.progressNum].clone()}finish(){}onUpdate(){if(null!=this.circuit&&0!=this.speedFactor&&!this.self.destroyed&&(this.progressDistance>=this.circuit.accumulateDistance-1&&this.finish(),this.isSmoothAlongRoute)){let e=.02;if(e>0){let t=new Laya.Vector3;Laya.Vector3.subtract(this.lastPosition,this.self.transform.position.clone(),t);let s=Laya.Vector3.scalarLength(t);this.speed=Laya.MathUtil.lerp(this.speed,s/e,e)}this.target.position=this.circuit.getRoutePoint(this.progressDistance+this.lookAheadForTargetOffset*this.speedFactor+this.lookAheadForTargetFactor*this.speed).position;let s=new Laya.Quaternion,i=this.circuit.getRoutePoint(this.progressDistance+this.lookAheadForSpeedOffset+this.lookAheadForSpeedFactor*this.speed).direction,a=this.circuit.getUpDirection(this.progressDistance+this.lookAheadForSpeedOffset+this.lookAheadForSpeedFactor*this.speed);Laya.Quaternion.rotationLookAt(i,a,s),Laya.Quaternion.invert(s,s),Laya.Quaternion.lerp(this.target.rotation,s,.1,s),this.target.rotation=s,this.progressPoint=this.circuit.getRoutePoint(this.progressDistance);var t=this.circuit.v3Subtract(this.progressPoint.position,this.self.transform.position);Laya.Vector3.dot(t,this.progressPoint.direction)>0&&(this.progressDistance+=.5*Laya.Vector3.scalarLength(t)),this.lastPosition=this.self.transform.position.clone()}}getY(t){if(1==this.curRoadIndex){let e=Math.pow(t.x,2),s=Math.pow(6,2),i=Math.pow(3,2);t.y=3-Math.sqrt(i-i/s*e)}else if(2==this.curRoadIndex){let e=Math.pow(13,2),s=Math.pow(t.x,2);t.y=13-Math.sqrt(e-s)}else t.y=0;return t.y}getRot(t,e){if(1==e){if(!this.lookAtTarget){let t=new Laya.Sprite3D;this.self.addChild(t),this.lookAtTarget=t;let e=new Laya.Sprite3D;this.self.addChild(e),this.lookAtTmpTarget=e}this.lookAtTarget.transform.localPosition=new Laya.Vector3(0,6,0),this.lookAtTmpTarget.transform.position=this.role.transform.position.clone(),this.lookAtTmpTarget.transform.lookAt(this.lookAtTarget.transform.position.clone(),new Laya.Vector3(0,0,1));let e=this.lookAtTmpTarget.transform.localRotationEuler.clone();return e.setValue(0,0,t.x>0?90-e.x:e.x-90),e}if(2==e){if(!this.lookAtTarget){let t=new Laya.Sprite3D;this.self.addChild(t),this.lookAtTarget=t;let e=new Laya.Sprite3D;this.self.addChild(e),this.lookAtTmpTarget=e}this.lookAtTarget.transform.localPosition=new Laya.Vector3(0,13,0),this.lookAtTmpTarget.transform.position=this.role.transform.position.clone(),this.lookAtTmpTarget.transform.lookAt(this.lookAtTarget.transform.position.clone(),new Laya.Vector3(0,0,1));let e=this.lookAtTmpTarget.transform.localRotationEuler.clone();return e.setValue(0,0,t.x>0?90-e.x:e.x-90),e}return new Laya.Vector3}ctrlCarLR(t){if(1==this.curRoadIndex){if(!this.lookAtTarget){let t=new Laya.Sprite3D;this.self.addChild(t),this.lookAtTarget=t;let e=new Laya.Sprite3D;this.self.addChild(e),this.lookAtTmpTarget=e}this.lookAtTarget.transform.localPosition=new Laya.Vector3(0,6,0),this.lookAtTmpTarget.transform.position=this.role.transform.position.clone(),this.lookAtTmpTarget.transform.lookAt(this.lookAtTarget.transform.position.clone(),new Laya.Vector3(0,0,1));let e=this.lookAtTmpTarget.transform.localRotationEuler.clone();e.setValue(0,0,t.x>0?90-e.x:e.x-90),Laya.Vector3.lerp(this.role.transform.localRotationEuler.clone(),e,.5,e),this.role.transform.localRotationEuler=e}else if(2==this.curRoadIndex){if(!this.lookAtTarget){let t=new Laya.Sprite3D;this.self.addChild(t),this.lookAtTarget=t;let e=new Laya.Sprite3D;this.self.addChild(e),this.lookAtTmpTarget=e}this.lookAtTarget.transform.localPosition=new Laya.Vector3(0,13,0),this.lookAtTmpTarget.transform.position=this.role.transform.position.clone(),this.lookAtTmpTarget.transform.lookAt(this.lookAtTarget.transform.position.clone(),new Laya.Vector3(0,0,1));let e=this.lookAtTmpTarget.transform.localRotationEuler.clone();e.setValue(0,0,t.x>0?90-e.x:e.x-90),Laya.Vector3.lerp(this.role.transform.localRotationEuler.clone(),e,.5,e),this.role.transform.localRotationEuler=e}else this.role.transform.localRotationEuler=new Laya.Vector3}setRoadConfig(t){this.curRoadIndex!=t&&(this.curRoadIndex=t,this.maxPosX=this.roadConfig[t].roadWidth)}}class c{constructor(){this.tween=new Laya.Tween,this.tweens=[]}getTimeByFrame(t){return Math.round(10*t)}toTween(t,e,s,i,a,n=!0){if(!t.destroyed){this.target=t,this.isLocal=n;var o={},r={};if(e.pos){var h=n?t.transform.localPosition.clone():t.transform.position.clone();o.posX=h.x,o.posY=h.y,o.posZ=h.z,r.posX=e.pos.x,r.posY=e.pos.y,r.posZ=e.pos.z}if(e.rot){var l=n?t.transform.localRotationEuler.clone():t.transform.rotationEuler.clone();o.rotX=l.x,o.rotY=l.y,o.rotZ=l.z,r.rotX=e.rot.x,r.rotY=e.rot.y,r.rotZ=e.rot.z}if(e.sca){var d=t.transform.getWorldLossyScale().clone();o.scaX=d.x,o.scaY=d.y,o.scaZ=d.z,r.scaX=e.sca.x,r.scaY=e.sca.y,r.scaZ=e.sca.z}this.tween.to(o,{posX:r.posX,posY:r.posY,posZ:r.posZ,rotX:r.rotX,rotY:r.rotY,rotZ:r.rotZ,scaX:r.scaX,scaY:r.scaY,scaZ:r.scaZ},s,a,Laya.Handler.create(this,()=>{i&&i();var t=this.tweens.shift();t?this.toTween(this.target,t.value,t.time,t.completeFun,a):this.updateTweenCallback&&(this.updateTweenCallback=null)}));var c=0;return this.tween.update=new Laya.Handler(this,()=>{if(t.destroyed)return void this.clearTween();let i=(c+=Laya.timer.delta)/s;i>1&&(i=1),e.pos&&(n?t.transform.localPosition=new Laya.Vector3(o.posX,o.posY,o.posZ):t.transform.position=new Laya.Vector3(o.posX,o.posY,o.posZ)),e.rot&&(n?t.transform.localRotationEuler=new Laya.Vector3(o.rotX,o.rotY,o.rotZ):t.transform.rotationEuler=new Laya.Vector3(o.rotX,o.rotY,o.rotZ)),e.sca&&t.transform.setWorldLossyScale(new Laya.Vector3(o.scaX,o.scaY,o.scaZ)),this.updateTweenCallback&&this.updateTweenCallback(i)}),this}}clearTween(t){this.tweens=[],this.tween.clear(),this.target&&t&&(t.pos&&(this.isLocal?this.target.transform.localPosition=new Laya.Vector3(t.pos.x,t.pos.y,t.pos.z):this.target.transform.position=new Laya.Vector3(t.pos.x,t.pos.y,t.pos.z)),t.rot&&(this.target.transform.rotationEuler=new Laya.Vector3(t.rot.x,t.rot.y,t.rot.z)),t.sca&&this.target.transform.setWorldLossyScale(new Laya.Vector3(t.sca.x,t.sca.y,t.sca.z)))}then(t,e,s){return this.tweens.push({value:t,time:e,completeFun:s}),this}static LookAtAndMove(t,e,s,i=0,a=!0,n){let o=new c,r=e.clone(),h=new Laya.Vector3;Laya.Vector3.subtract(t.transform.position.clone(),r,h),Laya.Vector3.normalize(h,h),Laya.Vector3.scale(h,i,h),Laya.Vector3.add(e,h,h);let l=h.clone();l.y=e.y;let d=new Laya.Sprite3D;t.addChild(d),d.transform.localPosition=new Laya.Vector3,d.transform.localRotationEuler=new Laya.Vector3,d.transform.lookAt(e,new Laya.Vector3(0,1,0));let f=d.transform.rotationEuler.clone();a&&(f.y+=180),d.destroy(),console.log(r,l,f),o.toTween(t,{rot:f},.5*s,()=>{},null,!1).then({pos:l},.25*s,()=>{n&&n()})}}var f,m,y,p='#include "Lighting.glsl";\n#if defined(GL_FRAGMENT_PRECISION_HIGH)// 原来的写法会被我们自己的解析流程处理，而我们的解析是不认内置宏的，导致被删掉，所以改成 if defined 了\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\nattribute vec4 a_PositionTexcoord;\nvarying vec2 v_Texcoord0;\n\nvoid main() {\n\tgl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\n\tv_Texcoord0 = a_PositionTexcoord.zw;\n\tgl_Position = remapGLPositionZ(gl_Position);\n}',u="#if defined(GL_FRAGMENT_PRECISION_HIGH)// 原来的写法会被我们自己的解析流程处理，而我们的解析是不认内置宏的，导致被删掉，所以改成 if defined 了\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nuniform sampler2D u_MainTex;\nuniform vec4 u_MainTex_TexelSize;\nuniform float u_DownSampleValue;\n\nvoid main()\n{\n    vec4 color = vec4(0.0,0.0,0.0,0.0);\n    vec2 uv = v_Texcoord0;\n    vec2 uvOffset = vec2(1.0,0.0)*u_MainTex_TexelSize.xy*u_DownSampleValue;\n    uv = uv - uvOffset*3.0;\n    //高斯参数\n    color+=0.0205*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.0855*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.232*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.324*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.232*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.0855*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.0205*texture2D(u_MainTex,uv);\n\n    gl_FragColor = color;\n    \n\n    \n}",x="#if defined(GL_FRAGMENT_PRECISION_HIGH)// 原来的写法会被我们自己的解析流程处理，而我们的解析是不认内置宏的，导致被删掉，所以改成 if defined 了\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nuniform sampler2D u_MainTex;\nuniform vec4 u_MainTex_TexelSize;\nuniform float u_DownSampleValue;\n\nvoid main()\n{\n    vec4 color = vec4(0.0,0.0,0.0,0.0);\n    vec2 uv = v_Texcoord0;\n    vec2 uvOffset = vec2(0.0,1.0)*u_MainTex_TexelSize.xy*u_DownSampleValue;\n    uv = uv - uvOffset*3.0;\n    //高斯参数\n    color+=0.0205*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.0855*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.232*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.324*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.232*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.0855*texture2D(u_MainTex,uv);\n    uv+=uvOffset;\n    color+=0.0205*texture2D(u_MainTex,uv);\n\n    gl_FragColor = color;\n    \n\n    \n}",g="#if defined(GL_FRAGMENT_PRECISION_HIGH)// 原来的写法会被我们自己的解析流程处理，而我们的解析是不认内置宏的，导致被删掉，所以改成 if defined 了\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nuniform sampler2D u_MainTex;\nuniform vec4 u_MainTex_TexelSize;\n\nvoid main()\n{\n    vec4 color = vec4(0.0,0.0,0.0,0.0);\n    color += texture2D(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(1.0,0.0));\n\tcolor += texture2D(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(-1.0,0.0));\n\tcolor += texture2D(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(0.0,-1.0));\n\tcolor += texture2D(u_MainTex,v_Texcoord0+u_MainTex_TexelSize.xy*vec2(0.0,1.0));\n    gl_FragColor = color/4.0;\n    //gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n}",L='#include "Lighting.glsl";\n#if defined(GL_FRAGMENT_PRECISION_HIGH)// 原来的写法会被我们自己的解析流程处理，而我们的解析是不认内置宏的，导致被删掉，所以改成 if defined 了\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\nattribute vec4 a_PositionTexcoord;\nvarying vec2 v_Texcoord0;\n\nvoid main() {\n\tgl_Position = vec4(a_PositionTexcoord.xy, 0.0, 1.0);\n\tv_Texcoord0 = a_PositionTexcoord.zw;\n\tgl_Position = remapGLPositionZ(gl_Position);\n}',S="#if defined(GL_FRAGMENT_PRECISION_HIGH)// 原来的写法会被我们自己的解析流程处理，而我们的解析是不认内置宏的，导致被删掉，所以改成 if defined 了\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nuniform sampler2D u_MainTex;\nuniform sampler2D u_sourceTexture0;\n\nvoid main()\n{\n    vec2 uv = v_Texcoord0;\n    vec4 mainColor = texture2D(u_MainTex,uv);\n    vec4 sourceColor = texture2D(u_sourceTexture0,uv);\n    float factor = step(sourceColor.x+sourceColor.y+sourceColor.z,0.001);\n    vec4 color = mix(sourceColor,mainColor,factor);\n    gl_FragColor =color;\n}",w="#if defined(GL_FRAGMENT_PRECISION_HIGH)// 原来的写法会被我们自己的解析流程处理，而我们的解析是不认内置宏的，导致被删掉，所以改成 if defined 了\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\nvarying vec2 v_Texcoord0;\nuniform sampler2D u_sourceTexture0;\nuniform sampler2D u_sourceTexture1;\n\nvoid main()\n{\n    vec2 uv = v_Texcoord0;\n    vec4 blurColor = texture2D(u_sourceTexture0,uv);\n    vec4 clearColor = texture2D(u_sourceTexture1,uv);\n    float factor = step(clearColor.x+clearColor.y+clearColor.z,0.001);\n    vec4 color = blurColor*factor;\n    color = (1.0-step(color.x+color.y+color.z,0.15))*vec4(1.0,0.0,0.0,1.0);\n    gl_FragColor = color;\n}";class _ extends Laya.PostProcessEffect{constructor(){super(),this._shader=null,this._shaderData=new Laya.ShaderData,this._downSampleNum=1,this._blurSpreadSize=1,this._blurIterations=2,this._texSize=new Laya.Vector4(1,1,1,1),this._shader=Laya.Shader3D.find("blurEffect"),this._tempRenderTexture=new Array(13)}static init(){var t={a_PositionTexcoord:Laya.VertexMesh.MESH_POSITION0},e={u_MainTex:Laya.Shader3D.PERIOD_MATERIAL,u_MainTex_TexelSize:Laya.Shader3D.PERIOD_MATERIAL,u_DownSampleValue:Laya.Shader3D.PERIOD_MATERIAL,u_sourceTexture0:Laya.Shader3D.PERIOD_MATERIAL,u_sourceTexture1:Laya.Shader3D.PERIOD_MATERIAL},s=Laya.Shader3D.add("blurEffect"),i=new Laya.SubShader(t,e);s.addSubShader(i);var a=i.addShaderPass(L,g),n=a.renderState;n.depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(t,e),s.addSubShader(i),(n=(a=i.addShaderPass(p,x)).renderState).depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(t,e),s.addSubShader(i),(n=(a=i.addShaderPass(p,u)).renderState).depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(t,e),s.addSubShader(i),(n=(a=i.addShaderPass(p,w)).renderState).depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE,i=new Laya.SubShader(t,e),s.addSubShader(i),(n=(a=i.addShaderPass(p,S)).renderState).depthTest=Laya.RenderState.DEPTHTEST_ALWAYS,n.depthWrite=!1,n.cull=Laya.RenderState.CULL_NONE,n.blend=Laya.RenderState.BLEND_DISABLE}get downSampleNum(){return this._downSampleNum}set downSampleNum(t){this._downSampleNum=Math.min(6,Math.max(t,0))}get blurSpreadSize(){return this._blurSpreadSize}set blurSpreadSize(t){this._blurSpreadSize=Math.min(10,Math.max(t,1))}get blurIterations(){return this._blurIterations}set blurIterations(t){this._blurIterations=Math.min(Math.max(t,0),6)}render(t){var e=t.command,s=t.camera.viewport,i=1/(1<<Math.floor(this._downSampleNum)),a=Math.floor(s.width*i),n=Math.floor(s.height*i);this._texSize.setValue(1/a,1/n,a,n),this._shaderData.setNumber(_.SHADERVALUE_DOWNSAMPLEVALUE,this.blurSpreadSize),this._shaderData.setVector(_.SHADERVALUE_TEXELSIZE,this._texSize);var o=Laya.RenderTexture.createFromPool(a,n,Laya.RenderTextureFormat.R8G8B8,Laya.RenderTextureDepthFormat.DEPTHSTENCIL_NONE);o.filterMode=Laya.FilterMode.Bilinear,this._tempRenderTexture[0]=o;var r=t.source;e.blitScreenTriangle(r,o,null,this._shader,this._shaderData,0),r=o;for(var h=0;h<this._blurIterations;h++){var l=Laya.RenderTexture.createFromPool(a,n,Laya.RenderTextureFormat.R8G8B8,Laya.RenderTextureDepthFormat.DEPTHSTENCIL_NONE);l.filterMode=Laya.FilterMode.Bilinear,e.blitScreenTriangle(r,l,null,this._shader,this._shaderData,1),r=l,this._tempRenderTexture[2*h+1]=l,(l=Laya.RenderTexture.createFromPool(a,n,Laya.RenderTextureFormat.R8G8B8,Laya.RenderTextureDepthFormat.DEPTHSTENCIL_NONE)).filterMode=Laya.FilterMode.Bilinear,e.blitScreenTriangle(r,l,null,this._shader,this._shaderData,2),r=l,this._tempRenderTexture[2*h+2]=l}t.source=r;var d=2*this._blurIterations+1;for(h=0;h<d;h++)Laya.RenderTexture.recoverToPool(this._tempRenderTexture[h]);t.deferredReleaseTextures.push(r)}}_.BLUR_TYPE_GaussianBlur=0,_.BLUR_TYPE_Simple=1,_.SHADERVALUE_MAINTEX=Laya.Shader3D.propertyNameToID("u_MainTex"),_.SHADERVALUE_TEXELSIZE=Laya.Shader3D.propertyNameToID("u_MainTex_TexelSize"),_.SHADERVALUE_DOWNSAMPLEVALUE=Laya.Shader3D.propertyNameToID("u_DownSampleValue");class C extends Laya.Material{constructor(t,e){super(),this.texelSize=new Laya.Vector4,this.doSamplevalue=0,this.setShaderName("blurEffect"),this._shaderValues.setNumber(C.SHADERVALUE_DOWNSAMPLEVALUE,e),this._shaderValues.setVector(C.SHADERVALUE_TEXELSIZE,t)}sourceTexture(t,e){this._shaderValues.setTexture(C.SHADERVALUE_SOURCETEXTURE0,t),this._shaderValues.setTexture(C.ShADERVALUE_SOURCETEXTURE1,e)}}C.SHADERVALUE_MAINTEX=Laya.Shader3D.propertyNameToID("u_MainTex"),C.SHADERVALUE_TEXELSIZE=Laya.Shader3D.propertyNameToID("u_MainTex_TexelSize"),C.SHADERVALUE_DOWNSAMPLEVALUE=Laya.Shader3D.propertyNameToID("u_DownSampleValue"),C.SHADERVALUE_SOURCETEXTURE0=Laya.Shader3D.propertyNameToID("u_sourceTexture0"),C.ShADERVALUE_SOURCETEXTURE1=Laya.Shader3D.propertyNameToID("u_sourceTexture1");class v{static init(){_.init(),this.camera=K.Share._camera,this.camera.clearFlag=Laya.CameraClearFlags.Sky,this.camera.cullingMask^=2,this.camera.enableHDR=!1,this.postProcess=new Laya.PostProcess;var t=new _;this.postProcess.addEffect(t),this.camera.postProcess=null,t.downSampleNum=0,t.blurSpreadSize=1,t.blurIterations=1}static setProcess(t){t&&!this.camera.postProcess?this.camera.postProcess=this.postProcess:!t&&this.camera.postProcess&&(this.camera.postProcess=null)}}class b{static getServerConfig(t){window.SGGameConfigs().then(e=>{t(e.data)})}static initConfigData(t){this.version=window.SGSdkConf.version,this._wx.getLaunchOptionsSync().query.channel&&localStorage.setItem("channel",this._wx.getLaunchOptionsSync().query.channel),this.getServerConfig(e=>{console.log("后台参数:",e),this.data=new T;var s=e.configs;for(let t in s)this.data[t]=s[t].config_val;this.data.is_allow_area=e.is_allow_area,this.data.front_wuchu_scene=e.front_wuchu_scene,this.data.wuchu_version=e.wuchu_version;let i=this._wx.getLaunchOptionsSync().query.channel;if(this.isVersionValid)this.data.is_allow_area&&this.allowScene&&(!this.data.channel_ditch||i)||(this.data.front_remen_banner_switch=!1);else{for(let t in this.data)"boolean"==typeof this.data[t]&&(this.data[t]=!1);this.data.front_video_tips_switch=!0}console.log("最终参数:",this.data),t&&t()})}static get allowScene(){if(this.isWechat&&this.data.front_wuchu_scene){let t=this._wx.getLaunchOptionsSync().scene.toString();return console.log("当前场景值：",t),-1!=this.data.front_wuchu_scene.split("|").indexOf(t)}return!1}static get isVersionValid(){if(!this._wx)return!1;let t=this.version.split("."),e=this.data.wuchu_version.split(".");return parseInt(e[0])+parseInt(e[1])+parseInt(e[2])>=parseInt(t[0])+parseInt(t[1])+parseInt(t[2])}}b.version="1.0.1",b.isPortrait=!1,b.homeMoreGameType=1,b.isShowHomeBanner=!0,b.isShowShopBanner=!1,b.isShowGameBanner=!0,b.isShowFinishBanner=!0,b.isShowHomeSideGrid=!0,b.isShowGameSingleGrid=!0,b.isShowFinishSideGrid=!0,b.data=null,b._wx=Laya.Browser.window.wx,b.isWechat=Laya.Browser.onWeiXin;class T{constructor(){this.is_allow_area=!1,this.channel_ditch=!1,this.front_wuchu_scene="1095|1058|1045|1046|1067|1084|1144|1091|1152|1089|1001|1007|1038|1037",this.wuchu_version="1.0.1",this.front_banner_ids=[],this.front_video_ids=[],this.front_interstitial_ids=[],this.front_custom_full_ids=[],this.front_custom_side_ids=[],this.front_custom_single_ids=[],this.front_remen_click_count=1,this.front_banner_refresh_time=5,this.front_banner_show_count=3,this.front_remen_start_gameCount=1,this.front_remen_over_gameCount=1,this.front_remen_finish_gameCount=1,this.front_remen_banner_showHide_time=.6,this.front_moreGame_switch=!0,this.front_video_tips_switch=!0,this.front_remen_loading_switch=!0,this.front_remen_start_switch=!0,this.front_remen_over_switch=!0,this.front_remen_finish_switch=!0,this.front_remen_banner_switch=!1,this.front_interstitial_onHide_switch=!0,this.front_interstitial_afterRemen_switch=!0}}class O{static initAd(t){if(!Laya.Browser.onWeiXin)return void(t&&t());this.front_banner_ids=b.data.front_banner_ids,this.front_video_ids=b.data.front_video_ids,this.front_interstitial_ids=b.data.front_interstitial_ids,this.front_custom_full_ids=b.data.front_custom_full_ids,this.front_custom_side_ids=b.data.front_custom_side_ids,this.front_custom_single_ids=b.data.front_custom_single_ids,this.front_banner_ids=this.shuffleArr(this.front_banner_ids),this.front_video_ids=this.shuffleArr(this.front_video_ids),this.front_interstitial_ids=this.shuffleArr(this.front_interstitial_ids),this.front_custom_full_ids=this.shuffleArr(this.front_custom_full_ids),this.front_custom_side_ids=this.shuffleArr(this.front_custom_side_ids),this.front_custom_single_ids=this.shuffleArr(this.front_custom_single_ids),this.initCustomAD(),this.initBanner(),this.createVideoAd(),this.createInterstitialAd();let e=()=>{this.isFullGridAdLoaded&&(t&&t(),Laya.timer.clear(this,e))};Laya.timer.loop(100,this,e)}static getSystemInfoSync(){if(Laya.Browser.onWeiXin)return this.sysInfo||(this.sysInfo=Laya.Browser.window.wx.getSystemInfoSync()),this.sysInfo}static initBanner(){if(Laya.Browser.onWeiXin&&!(this.front_banner_ids.length<=0)){this.bannerAds=[],this.bannerIndex=0,this.bannerTimesArr=[],this.bannerShowCount=[],this.bannerErrorArr=[];for(let t=0;t<this.front_banner_ids.length;t++)this.bannerTimesArr.push(0),this.bannerShowCount.push(0),this.bannerErrorArr.push(!1);for(let t=0;t<this.front_banner_ids.length;t++){let e=this.createBannerAd(t);this.bannerAds.push(e)}}}static get isAllBannerError(){let t=!0;for(let e=0;e<this.bannerErrorArr.length;e++)if(!this.bannerErrorArr[e]){t=!1;break}return t}static showBannerAd(){if(Laya.Browser.onWeiXin){if(this.isAllBannerError)return this.stopCountBannerTime(),void this.initBanner();for(let t=0;t<this.bannerErrorArr.length&&this.bannerErrorArr[this.bannerIndex];t++)this.bannerIndex++,this.bannerIndex>=this.front_banner_ids.length&&(this.bannerIndex=0);this.hideBannerAd(),this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].show(),this.stopCountBannerTime(),Laya.timer.loop(100,this,this.countBannerTime)}}static hideBannerAd(){if(Laya.Browser.onWeiXin)if(this.isAllBannerError)this.stopCountBannerTime();else{for(let t=0;t<this.bannerAds.length;t++)this.bannerAds[t]&&this.bannerAds[t].hide();this.stopCountBannerTime()}}static countBannerTime(){this.bannerTimesArr[this.bannerIndex]+=.1,this.bannerTimesArr[this.bannerIndex]>=b.data.front_banner_refresh_time&&(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].hide(),this.bannerTimesArr[this.bannerIndex]=0,this.bannerShowCount[this.bannerIndex]++,this.bannerShowCount[this.bannerIndex]>=b.data.front_banner_show_count&&(this.bannerShowCount[this.bannerIndex]=0,this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].destroy(),this.bannerAds[this.bannerIndex]=null,this.bannerAds[this.bannerIndex]=this.createBannerAd(this.bannerIndex)),this.bannerIndex++,this.bannerIndex>=this.front_banner_ids.length&&(this.bannerIndex=0),this.showBannerAd())}static stopCountBannerTime(){Laya.timer.clear(this,this.countBannerTime)}static createBannerAd(t){if(!Laya.Browser.onWeiXin)return;let e=this.getSystemInfoSync(),s=Laya.Browser.window.wx.createBannerAd({adUnitId:this.front_banner_ids[t],style:{top:.8*e.screenHeight,width:10,left:e.screenWidth/2-150},adIntervals:30});return s.onLoad(()=>{this.bannerErrorArr[t]=!1,console.log("Banner广告加载成功")}),s.onError(e=>{this.bannerErrorArr[t]=!0,console.error("Banner广告加载失败",JSON.stringify(e))}),s.onResize(t=>{let i=s.style.realHeight+.1;s.style.top=e.screenHeight-i}),s}static createVideoAd(){if(Laya.Browser.onWeiXin&&!(this.front_video_ids.length<=0)&&!this.isVideoLoading&&(this.isVideoLoading=!0,Laya.Browser.onWeiXin)){var t,e=this;null!=(t=this.videoAd)&&(t.offLoad(onLoadVideo),t.offError(onErrorVideo),t.offClose(onCloseVideo)),(t=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:e.front_video_ids[0]})).onLoad(onLoadVideo),t.onError(onErrorVideo),t.onClose(onCloseVideo),this.videoAd=t}function onLoadVideo(){console.log("video 加载成功"),e.isExistVideoAd=!0,this.isVideoLoading=!1}function onErrorVideo(t){console.error("video 加载错误",t),e.isExistVideoAd=!1,this.isVideoLoading=!1}function onCloseVideo(t){!!(t&&t.isEnded||void 0===t)?(e.videoFinishCallback&&e.videoFinishCallback(),e.videoFinishCallback=null):(e.videoCancelCallback&&e.videoCancelCallback(),e.videoCancelCallback=null),e.videoCompleteCallback&&e.videoCompleteCallback(),e.videoCompleteCallback=null}}static showVideoAd(t,e,s,i=!1){if(!Laya.Browser.onWeiXin||this.front_video_ids.length<=0)return t&&t(),e&&e(),void(s&&s());if(!Laya.Browser.onWeiXin)return;let a=this;if(this.videoFinishCallback=t,this.videoCancelCallback=e,this.videoCompleteCallback=s,this.isExistVideoAd||this.createVideoAd(),Laya.Browser.onWeiXin){if(!this.videoAd)return Laya.Browser.window.wx.showToast({title:"暂无视频",duration:2e3}),void(s&&s());var n=this.videoAd;n.show().then(()=>{}).catch(t=>{n.load().then(()=>n.show()).catch(t=>{a.videoCompleteCallback&&a.videoCompleteCallback(),a.videoCompleteCallback=null,!i&&this.videoFinishCallback&&Laya.Browser.window.wx.showToast({title:"暂无视频",duration:2e3}),i&&this.videoFinishCallback&&(this.videoFinishCallback&&this.videoFinishCallback(),this.videoFinishCallback=null,Laya.Browser.window.wx.showToast({title:"已获得奖励",duration:2e3})),this.destroyVideoAd()})})}}static destroyVideoAd(){this.videoAd&&(this.videoAd.destroy(),this.videoAd=null,this.createVideoAd())}static initCustomAD(){Laya.Browser.onWeiXin&&(this.createFullGrid(),this.createSideGrid(),this.createSingleGrid())}static createFullGrid(){if(!Laya.Browser.onWeiXin||this.front_custom_full_ids.length<=0)return void(this.isFullGridAdLoaded=!0);let t=0,e=b.isPortrait?1:2,s={};for(let i=0;i<e;i++){s=b.isPortrait?{left:0,top:this.getSystemInfoSync().screenHeight/2-this.getSystemInfoSync().screenWidth/2-50,width:this.getSystemInfoSync().screenWidth}:{left:this.getSystemInfoSync().screenWidth/2-300+300*Math.floor(i%2),top:30,width:10,height:10};let a=Laya.Browser.window.wx.createCustomAd({adUnitId:this.front_custom_full_ids[i],adIntervals:30,style:s});a.onError(s=>{++t>=e&&(this.isFullGridAdLoaded=!0),console.log("全屏格子加载失败:",JSON.stringify(s))}),a.onLoad(()=>{++t>=e&&(this.isFullGridAdLoaded=!0),this.fullGridAd.push(a),console.log("全屏格子"+i.toString()+"加载成功:")})}}static visibleFullGridAd(t=!0){if(Laya.Browser.onWeiXin&&!(this.fullGridAd.length<=0))for(let e=0;e<this.fullGridAd.length;e++)t?this.fullGridAd[e].show():this.fullGridAd[e].hide()}static createSideGrid(){if(Laya.Browser.onWeiXin&&!(this.front_custom_side_ids.length<=0))for(let t=0;t<2;t++){let e=t<this.front_custom_side_ids.length?t:this.front_custom_side_ids.length-1,s=Laya.Browser.window.wx.createCustomAd({adUnitId:this.front_custom_side_ids[e],adIntervals:30,style:{left:0==t?0:this.getSystemInfoSync().screenWidth-65,top:.1*this.getSystemInfoSync().screenHeight}});s.onError(t=>{console.log("屏幕侧格子加载失败:",JSON.stringify(t))}),s.onLoad(()=>{console.log("屏幕侧格子"+t.toString()+"加载成功:"),this.sideGridAd.push(s)})}}static visibleSideGridAd(t=!0){if(Laya.Browser.onWeiXin)for(let e=0;e<this.sideGridAd.length;e++)t?this.sideGridAd[e].show():this.sideGridAd[e].hide()}static createSingleGrid(){if(Laya.Browser.onWeiXin&&!(this.front_custom_single_ids.length<=0))for(let t=0;t<2;t++){let e=t<this.front_custom_single_ids.length?t:this.front_custom_single_ids.length-1,s=Laya.Browser.window.wx.createCustomAd({adUnitId:this.front_custom_single_ids[e],adIntervals:30,style:{left:0==t?0:this.getSystemInfoSync().screenWidth-70,top:.1*this.getSystemInfoSync().screenHeight}});s.onError(t=>{console.log("单格子加载失败:",JSON.stringify(t))}),s.onLoad(()=>{console.log("单格子"+t.toString()+"加载成功:"),this.singleGridAd.push(s)})}}static visibleGameGridAd(t=!0){if(Laya.Browser.onWeiXin)for(let e=0;e<this.singleGridAd.length;e++)t?this.singleGridAd[e].show():this.singleGridAd[e].hide()}static createInterstitialAd(){!Laya.Browser.onWeiXin||this.front_interstitial_ids.length<=0||(this.intersititialAd&&(this.intersititialAd.offError(),this.intersititialAd.offLoad(),this.intersititialAd.offClose(),this.intersititialAd.destroy(),this.intersititialAd=null),this.intersititialAd=Laya.Browser.window.wx.createInterstitialAd({adUnitId:this.front_interstitial_ids[0]}),this.intersititialAd.onError(t=>{this.intersititialError=!0,console.log("插屏广告加载失败:",JSON.stringify(t))}),this.intersititialAd.onLoad(()=>{this.intersititialError=!1}),this.intersititialAd.onClose(()=>{this.intersititialCB&&this.intersititialCB()}),this.intersititialAd.load())}static showInterstitialAd(t){if(!Laya.Browser.onWeiXin||!this.intersititialAd||this.intersititialError)return this.intersititialError&&this.createInterstitialAd(),void(t&&t());this.intersititialCB=t,this.intersititialAd.show().then(()=>{}).catch(t=>{this.intersititialCB&&this.intersititialCB()})}static shuffleArr(t){let e=t.length;for(;e;){let s=Math.floor(Math.random()*e--);[t[s],t[e]]=[t[e],t[s]]}return t}}O.front_banner_ids=[],O.front_video_ids=[],O.front_interstitial_ids=[],O.front_custom_full_ids=[],O.front_custom_side_ids=[],O.front_custom_single_ids=[],O.bannerAds=[],O.bannerIndex=0,O.bannerTimesArr=[],O.bannerShowCount=[],O.bannerErrorArr=[],O.isExistVideoAd=!1,O.isVideoLoading=!1,O.fullGridAd=[],O.fullGridError=!1,O.fullGridShowCount=0,O.fullGridCurIndex=0,O.isFullGridAdLoaded=!1,O.sideGridAd=[],O.singleGridAd=[],O.intersititialAd=null,O.intersititialCB=null,O.intersititialError=!1;class A{static init(t){if(!Laya.Browser.onWeiXin)return void(t&&t());b.initConfigData(()=>{O.initAd(()=>{this.adLoaded=!0}),this.sdkLoaded=!0,b.data.front_interstitial_onHide_switch&&Laya.Browser.window.wx.onShow(()=>{O.showInterstitialAd()})});let e=()=>{this.adLoaded&&this.sdkLoaded&&(Laya.timer.clear(this,e),this.showLoading(t))};Laya.timer.loop(100,this,e)}static showLoading(t){Laya.Browser.onWeiXin?this.showRemen(m.Remen_Loading,t):t&&t()}static inHome(){Laya.Browser.onWeiXin&&(b.isShowHomeBanner&&O.showBannerAd(),b.isShowHomeSideGrid&&O.visibleSideGridAd(!0),this.visibleHomeUI(!0))}static inShop(){Laya.Browser.onWeiXin&&(O.hideBannerAd(),b.isShowShopBanner&&O.showBannerAd(),O.visibleSideGridAd(!1),this.visibleHomeUI(!1))}static moreGame(){O.hideBannerAd(),O.visibleSideGridAd(!1),this.showRemen(m.Remen_Start,()=>{b.isShowHomeBanner&&O.showBannerAd(),b.isShowHomeSideGrid&&O.visibleSideGridAd(!0)},!0)}static startGame(t){Laya.Browser.onWeiXin?(O.hideBannerAd(),O.visibleSideGridAd(!1),this.visibleHomeUI(!1),this.showRemen(m.Remen_Start,t)):t&&t()}static inGame(){Laya.Browser.onWeiXin&&(O.hideBannerAd(),b.isShowGameBanner&&O.showBannerAd(),b.isShowGameSingleGrid&&O.visibleGameGridAd(!0))}static gameOver(t){Laya.Browser.onWeiXin?(O.hideBannerAd(),O.visibleGameGridAd(!1),this.showRemen(m.Remen_Over,t)):t&&t()}static inFinish(){Laya.Browser.onWeiXin&&(O.hideBannerAd(),b.isShowFinishBanner&&O.showBannerAd(),b.isShowFinishSideGrid&&O.visibleSideGridAd(!0))}static backToHome(t){Laya.Browser.onWeiXin?(O.hideBannerAd(),O.visibleSideGridAd(!1),this.showRemen(m.Remen_Finish,()=>{t&&t(),this.gameCount++})):t&&t()}static showRemen(t,e,s=!1){let i=!1;switch(t){case m.Remen_Loading:i=b.data.front_remen_loading_switch;break;case m.Remen_Start:i=b.data.front_remen_start_switch&&this.gameCount>=b.data.front_remen_start_gameCount;break;case m.Remen_Over:i=b.data.front_remen_over_switch&&this.gameCount>=b.data.front_remen_over_gameCount;break;case m.Remen_Finish:i=b.data.front_remen_finish_switch&&this.gameCount>=b.data.front_remen_finish_gameCount}i||s?Laya.Scene.open(f.SGRemen,!1,{ccb:e,index:t},Laya.Handler.create(this,t=>{Laya.stage.addChild(t)})):e&&e()}static visibleHomeUI(t=!0){t?Laya.Scene.open(f.SGHomeUI,!1,null,Laya.Handler.create(this,t=>{Laya.stage.addChild(t)})):Laya.Scene.close(f.SGHomeUI)}}A.gameCount=1,A.adLoaded=!1,A.sdkLoaded=!1,function(t){t.SGRemen="SGScene/SGRemen.scene",t.SGHomeUI="SGScene/SGHomeUI.scene"}(f||(f={})),function(t){t[t.Remen_Loading=0]="Remen_Loading",t[t.Remen_Start=1]="Remen_Start",t[t.Remen_Over=2]="Remen_Over",t[t.Remen_Finish=3]="Remen_Finish"}(m||(m={}));class D{static toAlpha(t,e,s,i,a=null,n=null,o=!1,r=!1){if(t){this.clearTween(t);var h=null;t.alpha=e,alpha1()}function alpha1(){h=r||o?new Laya.Handler(this,alpha2):new Laya.Handler(this,()=>{n&&n(),n=null}),Laya.Tween.to(t,{alpha:s},i,a,h)}function alpha2(){h=r?new Laya.Handler(this,alpha1):null,Laya.Tween.to(t,{alpha:e},i,a,h)}}static toScale(t,e,s,i,a,n,o,r=!1){if(t){this.clearTween(t);var h=null;t.scale(e,e),scale1()}function scale1(){h=r||o?new Laya.Handler(this,scale2):new Laya.Handler(this,()=>{n&&n(),n=null}),Laya.Tween.to(t,{scaleX:s,scaleY:s},i,a,h)}function scale2(){h=r?new Laya.Handler(this,scale1):null,Laya.Tween.to(t,{scaleX:e,scaleY:e},i,a,h)}}static toPosition(t,e,s,i=null,a=null,n=!1,o=0){if(!t)return;this.clearTween(t);let r=new Laya.Vector2(t.x,t.y);function pos1(){if(n)switch(o){case 0:var r=new Laya.Handler(this,pos2);break;case 1:r=new Laya.Handler(this,pos3)}else r=new Laya.Handler(this,()=>{a&&a(),a=null});e.x&&e.y?Laya.Tween.to(t,{x:e.x,y:e.y},s,i,r):e.x?Laya.Tween.to(t,{x:e.x},s,i,r):Laya.Tween.to(t,{y:e.y},s,i,r)}function pos2(){e.x&&e.y?Laya.Tween.to(t,{x:r.x,y:r.y},s,i,Laya.Handler.create(this,pos1)):e.x?Laya.Tween.to(t,{x:r.x},s,i,Laya.Handler.create(this,pos1)):Laya.Tween.to(t,{y:r.y},s,i,Laya.Handler.create(this,pos1))}function pos3(){t.pos(r.x,r.y),pos1()}pos1()}static toRotaion(t,e,s,i=!1,a=!1){var n=t.rotation;function rotate2(){Laya.Tween.to(t,{rotation:-e},2*s,null,Laya.Handler.create(this,rotate3))}function rotate3(){Laya.Tween.to(t,{rotation:e},2*s,null,Laya.Handler.create(this,rotate2))}function rotate4(){Laya.Tween.to(t,{rotation:n},s)}!function(){if(i)var n=new Laya.Handler(this,rotate2);else if(a)var n=new Laya.Handler(this,rotate4);Laya.Tween.to(t,{rotation:e},s,null,n)}()}static clearTween(t){Laya.Tween.clearAll(t)}}class X extends Laya.Scene{constructor(){super(),this.touchStartPosX=0,this.raceTimer=0,this.tipList=[],this.curNos=168,this.nosCount=0,this.isStart=!1}pushGetTip(t){this.tipList.push(t),this.showGetTip(t)}showGetTip(t){if(this.isShowGet)return;switch(this.isShowGet=!0,this.tipList.pop(),t){case 0:this.imgGetTip.skin="gameUI/yxz_img_exp.png";break;case 1:this.imgGetTip.skin="gameUI/yxz_img_jq.png";break;case 2:this.imgGetTip.skin="gameUI/yxz_img_no2.png"}this.imgGetTip.right=-300,this.imgGetTip.alpha=0,Laya.Tween.to(this.imgGetTip,{right:32,alpha:1},500);let e=this.tipList.length>0?1e3:3e3;Laya.timer.once(e,this,this.hideGetTip)}hideGetTip(){this.isShowGet=!1,Laya.Tween.to(this.imgGetTip,{right:-300,alpha:0},500,null,Laya.Handler.create(this,()=>{this.tipList.length>0&&this.showGetTip(this.tipList[0])}))}useNos(){this.imgTip.visible&&(K.Share.isStartGame=!0,this.imgTip.visible=!1),this.imgNosLight.visible&&(i.instance.playSoundEffect("Nos"),K.Share.playerComp.useNos(),this.imgNosLight.visible=!1,this.nosMask.y=168,this.curNos=168)}countNum(){this.imgNum.visible=!1;let t=3,e=()=>{this.imgNum.visible=!0,t>0?(this.imgNum.alpha=0,this.imgNum.scale(1.3,1.3),this.imgNum.skin="gameUI/yxz_sz_"+t+".png",Laya.Tween.to(this.imgNum,{scaleX:1,scaleY:1,alpha:1},200,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.imgNum,{alpha:0},500)})),i.instance.playSoundEffect("321")):0==t&&(this.imgNum.skin="gameUI/yxz_wz_go.png",this.imgNum.scale(1.3,1.3),this.imgNum.alpha=1,Laya.Tween.to(this.imgNum,{scaleX:1,scaleY:1,alpha:1},800,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.imgNum,{scaleX:1.3,scaleY:1.3,alpha:0},200)})),i.instance.playSoundEffect("StartRace")),--t<0&&(Laya.timer.clear(this,e),this.touchStart(null))};Laya.timer.loop(1e3,this,e),i.instance.playSoundEffect("StartEngine")}addNos(){this.nosMask.y>this.curNos&&!K.Share.playerComp.isUseNos&&(this.nosMask.y-=2,this.nosMask.y<28&&(this.nosMask.y=28)),this.nosMask.y<30&&(this.imgNosLight.visible=!0,e.getPlayerData().isNewPlayer&&(this.showNosTip(),e.getPlayerData().isNewPlayer=!1,e.setPlayerData()))}onOpened(){i.instance.playMusic("Bg"),X.Share=this,this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.countNum(),a.addClickEvent(this.btnNos,this,this.useNos),this.btnDrift.centerX=.5*Laya.stage.width-120,this.btnNos.centerX=.5*Laya.stage.width-320,this.btnLeft.centerX=.5*-Laya.stage.width+120,this.btnRight.centerX=.5*-Laya.stage.width+320,this.btnDrift.on(Laya.Event.MOUSE_DOWN,this,()=>{K.Share.playerComp.isDrift=!0,D.toScale(this.btnDrift,1,1.1,100)}),this.btnDrift.on(Laya.Event.MOUSE_UP,this,()=>{K.Share.playerComp.isDrift=!1,D.toScale(this.btnDrift,this.btnDrift.scaleX,1,100)}),this.btnDrift.on(Laya.Event.MOUSE_OUT,this,()=>{K.Share.playerComp.isDrift=!1,D.toScale(this.btnDrift,this.btnDrift.scaleX,1,100)}),this.btnLeft.on(Laya.Event.MOUSE_DOWN,this,()=>{K.Share.playerComp.isLeft=!0,D.toScale(this.btnLeft,1,1.1,100)}),this.btnLeft.on(Laya.Event.MOUSE_UP,this,()=>{K.Share.playerComp.isLeft=!1,D.toScale(this.btnLeft,this.btnLeft.scaleX,1,100)}),this.btnLeft.on(Laya.Event.MOUSE_OUT,this,()=>{K.Share.playerComp.isLeft=!1,D.toScale(this.btnLeft,this.btnLeft.scaleX,1,100)}),this.btnRight.on(Laya.Event.MOUSE_DOWN,this,()=>{K.Share.playerComp.isRight=!0,D.toScale(this.btnRight,1,1.1,100)}),this.btnRight.on(Laya.Event.MOUSE_UP,this,()=>{K.Share.playerComp.isRight=!1,D.toScale(this.btnRight,this.btnRight.scaleX,1,100)}),this.btnRight.on(Laya.Event.MOUSE_OUT,this,()=>{K.Share.playerComp.isRight=!1,D.toScale(this.btnRight,this.btnRight.scaleX,1,100)}),D.toPosition(this.imgFinger,{x:144,y:this.imgFinger.y},500,null,null,!0),K.Share.createLevel(),this.fcGrade.value=e.getPlayerData().grade.toString(),Laya.timer.frameLoop(1,this,()=>{if(!K.Share.isStartGame)return;Laya.Browser.onPC&&(K.Share.playerComp.isLeft=Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.A),K.Share.playerComp.isRight=Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.D),K.Share.playerComp.isDrift=Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.SPACE)),this.showSpeed(K.Share.playerComp.speedFactor/K.Share.playerComp.maxSpeed,60*K.Share.playerComp.maxSpeed),-1!=K.Share.playerComp.curRoadIndex&&(this.disProgress.x=(K.Share.playerComp.progressDistance-20)/(K.Share.configPaths[K.Share.configPaths.length-1][2]-20)*315-315),this.addNos();let t=K.Share.carComps;for(let e=0;e<t.length;e++){let s=6-e;t[e].isAi||(this.lbRank.text=s+"/6")}this.raceTimer+=.001*Laya.timer.delta;let e=r.getTimeLeft2BySecond(this.raceTimer,'"');this.lbTime.text=e}),A.inGame(),this.imgNosLight.interval=20}onClosed(){Laya.timer.clearAll(this),r.clearMask(this.imgProgress),r.clearMask(this.imgNos),r.clearMask(this.imgSpeed)}touchStart(t){K.Share.isGameOver||K.Share.isFinish||(K.Share.isStartGame||this.isStart||(this.imgTip.visible=!1,K.Share.gameStart(),this.isStart=!0),this.imgNosLight.visible&&(this.nosCount++,this.nosCount>1&&this.useNos(),Laya.timer.once(500,this,()=>{this.nosCount=0})))}touchMove(t){K.Share.isGameOver||K.Share.isFinish}touchEnd(t){K.Share.isGameOver||K.Share.isFinish}showSpeed(t,e){t>1?t=1:t<0&&(t=0),t<.33?(this.speedMask.rotation=90,this.speedMask.x=61,this.speedMask.y=t/.33*72):t<.66?(this.speedMask.rotation=90-(t-.33)/.33*90,this.speedMask.x=Math.random()+60,this.speedMask.y=Math.random()+70):(this.speedMask.rotation=0,this.speedMask.y=66,this.speedMask.x=(t-.66)/.34*77+61),this.fcSpeed.value=(t*e).toFixed(0)}showNosTip(){this.imgTip.visible=!0,this.imgTip.skin="gameUI/yxz_wz_yd3.png",this.imgArrow.visible=!1,K.Share.isStartGame=!1}}class k extends d{constructor(){super(...arguments),this.canMove=!0,this.isAi=!1,this.isDrift=!1,this.isLeft=!1,this.isRight=!1,this.isFinish=!1,this.canCtrl=!0,this.newFov=60,this.originPosX=0,this.targetPos=new Laya.Vector3,this.lerpPos=new Laya.Vector3,this.targetRot=new Laya.Vector3,this.lerpRot=new Laya.Vector3,this.maxRotX=6,this.maxPosX=3.5,this.maxDis=0,this.spdUpgradeFactor=1,this.acceUpgradeFactor=1,this.ctrlUpgradeFactor=1,this.moveFactor=.02,this.isPressed=!0,this.lrTimer=0,this.movelrFactor=.08,this.maxlrDis=10,this.curCameraX=0,this.isJump=!1,this.jumpY=0,this.acce=.001,this.dece=-.002,this.maxSpeed=3,this.oldSpeed=0,this.speedTimer=0,this.isSoundIdle=!1,this.isUseNos=!1,this.isMoveLeft=!1,this.moveLRTimer=0,this.moveLRAcce=1e-7,this.isBoom=!1,this.isHitDelay=!1}restart(){Laya.timer.clearAll(this),Laya.timer.clear(this,this.lookAtCar),Laya.timer.clear(this,this.frameUpdateRolePos),this.self.transform.position=new Laya.Vector3,this.self.transform.rotationEuler=new Laya.Vector3,this.camera.transform.position=this.camOriPos.clone(),this.camera.transform.rotationEuler=this.camOriRot.clone(),this.realCamera.transform.localPosition=new Laya.Vector3,this.realCamera.transform.localRotationEuler=new Laya.Vector3(0,180,0),this.role.transform.localPosition=new Laya.Vector3,this.role.transform.localRotationEuler=new Laya.Vector3(0,180,0),this.realCamera.fieldOfView=65,this.role.destroyChildren(),this.isLeft=!1,this.isRight=!1,this.isDrift=!1,this.speedTimer=0,this.oldSpeed=0,this.speedFactor=0}setPosX(t){let e=this.role.transform.localPosition.clone();e.x=t,this.role.transform.localPosition=e,this.targetPos=e,this.isAi||(this.realCamera.transform.localPosition=e),this.recalcPos()}init(t,s){if(t<20&&(t=20),this.touchId=null,k.share=this,this.curRoadIndex=-1,this.setRoadConfig(0),this.canMove=!0,this.isPressed=!0,this.speedFactor=0,this.isFinish=!1,this.role?(this.targetPos=new Laya.Vector3,this.targetRot=new Laya.Vector3):(this.role=this.self.getChildByName("Car_1"),this.isAi||(this.camera=this.self.getChildByName("Camera"),Laya.timer.frameLoop(1,this,this.frameUpdateRolePos),this.realCamera=this.camera.getChildByName("Main Camera"),this.speedLineFx=this.realCamera.getChildByName("SpeedLine_1"),this.camera.addChild(K.Share._light),this.camOriPos=this.camera.transform.position.clone(),this.camOriRot=this.camera.transform.rotationEuler.clone())),super.init(t,s),!this.isAi){this.newFov=60,this.realCamera.fieldOfView=60,this.camera.transform.localPosition=new Laya.Vector3(0,3,-9),this.camera.transform.localRotationEuler=new Laya.Vector3(10,0,0),this.speedLineFx.active=!1;let t=e.carUpgradeData[this.carId-1],s=e.getPlayerData().skinLvl[this.carId-1];this.ctrlUpgradeFactor=.9*K.Share.getUpgradeData(t.ctrl,t.addCtrl,s),this.spdUpgradeFactor=K.Share.getUpgradeData(t.spd,t.addSpd,s),this.acceUpgradeFactor=K.Share.getUpgradeData(t.acce,t.addAcce,s),this.maxSpeed=2.8*this.spdUpgradeFactor*.7,this.acce=.001*this.acceUpgradeFactor*.8}this.role.transform.localRotationEuler=new Laya.Vector3,this.roleChild=this.role.getChildAt(0)}createTrail(){this.trailL||(this.trailL=r.D3CloneObj(K.Share._prefab.getChildByName("DriftTrial")),this.roleChild.addChild(this.trailL),this.trailL.transform.localPosition=new Laya.Vector3(-.528,.2,-1.437),i.instance.playSoundEffect("Drift")),this.trailR||(this.trailR=r.D3CloneObj(K.Share._prefab.getChildByName("DriftTrial")),this.roleChild.addChild(this.trailR),this.trailR.transform.localPosition=new Laya.Vector3(.528,.2,-1.437))}destroyTrail(){this.trailL&&(this.trailL.destroy(),this.trailL=null,i.instance.stopSound("Drift")),this.trailR&&(this.trailR.destroy(),this.trailR=null)}onUpdate(){if(!K.Share.isStartGame)return;if(this.isBoom)return;if(!this.canMove)return;super.onUpdate(),this.speedChange(),this.isLeft?this.moveLeft():this.isRight?this.moveRight():this.cancelLR();let t=this.role.transform.localPosition.clone();if(t.y=this.getY(t)+this.jumpY,Laya.Vector3.lerp(this.role.transform.localPosition.clone(),t,.3,t),this.role.transform.localPosition=t,this.isJump||this.ctrlCarLR(t),!this.isAi){let s=this.realCamera.transform.localPosition.clone();if(s.x=.8*t.x,s.y=t.y,Laya.Vector3.lerp(this.realCamera.transform.localPosition,s,.6,s),this.realCamera.transform.localPosition=s,this.isDrift){let t=this.circuit.getRouteAngle(this.progressDistance+this.lookAheadForTargetOffset*this.speedFactor+this.lookAheadForTargetFactor*this.speed),s=t[0],i=t[1],a=this.roleChild.transform.localRotationEuler.clone(),n=1,o=30,r=.05;if(s>.05){if(i){var e=a.y+n;e>o&&(e=o),this.targetPos.x-=r}else(e=a.y-n)<-o&&(e=-o),this.targetPos.x+=r;a.y=e,X.Share.curNos-=1,X.Share.curNos<28&&(X.Share.curNos=28),this.createTrail()}else a.y>0?(e=a.y-n)<0&&(e=0):a.y<0?(e=a.y+n)>0&&(e=0):e=0,a.y=e,this.destroyTrail();this.roleChild.transform.localRotationEuler=a}else this.destroyTrail()}if(-1==this.curRoadIndex)return;let s=K.Share.configPaths;for(let t=s.length-1;t>=0;t--)if(this.progressDistance>s[t][2]){if(t==s.length-1){if(this.isPressed=!1,this.speedTimer=0,this.oldSpeed=this.speedFactor,this.curRoadIndex=s[t][1],this.isFinish=!0,!this.isAi){this.cameraTween(),K.Share.finishFX();let t=K.Share.carComps.sort((t,e)=>e.progressDistance-t.progressDistance);K.Share.myRank=t.indexOf(this)+1,Laya.timer.once(2e3,this,()=>{K.Share.gameOver(1==K.Share.myRank)})}break}this.setRoadConfig(s[t][1]);break}}cameraTween(){this.speedFactor=2.5,this.oldSpeed=2.5,this.camera.transform.localPosition=new Laya.Vector3(-3.6,.8,13);let t=this.camera.transform.position.clone();Laya.timer.frameLoop(1,this,this.lookAtCar,[t])}lookAtCar(t){this.camera.transform.lookAt(this.self.transform.position,new Laya.Vector3(0,1,0),!1);let e=this.camera.transform.rotationEuler.clone();e.y+=180,e.x*=-1,e.z=0,this.camera.transform.rotationEuler=e,this.camera.transform.position=t}finish(){}moveRight(){this.lrTimer+=Laya.timer.delta;let t=this.lrTimer*this.movelrFactor+this.originPosX;t>this.maxlrDis&&(t=this.maxlrDis);let e=this.maxPosX,s=this.maxRotX,i=this.role.transform.localPosition.clone();if(i.x-=this.moveFactor*t*Math.max(this.speedFactor,.6)*this.ctrlUpgradeFactor,i.x>e?i.x=e:i.x<-e&&(i.x=-e),!this.isJump&&!this.isDrift){let e=this.roleChild.transform.localRotationEuler.clone();e.y-=t/s,this.roleChild.transform.localRotationEuler=e}this.originPosX=.001*this.lrTimer,this.targetPos=i}moveLeft(){this.lrTimer+=Laya.timer.delta;let t=-this.lrTimer*this.movelrFactor+this.originPosX;t<-this.maxlrDis&&(t=-this.maxlrDis);let e=this.maxPosX,s=this.maxRotX,i=this.role.transform.localPosition.clone();if(i.x-=this.moveFactor*t*Math.max(this.speedFactor,.6)*this.ctrlUpgradeFactor,i.x>e?i.x=e:i.x<-e&&(i.x=-e),!this.isJump&&!this.isDrift){let e=this.roleChild.transform.localRotationEuler.clone();e.y-=t/s,this.roleChild.transform.localRotationEuler=e}this.originPosX=.001*this.lrTimer,this.targetPos=i}cancelLR(){this.lrTimer=0}frameUpdateRolePos(){if(K.Share.isGameOver)return;if(this.isJump)return;let t=this.role.transform.localPosition.clone();this.targetPos.setValue(this.targetPos.x,this.role.transform.localPosition.y,this.role.transform.localPosition.z),this.targetPos.x<-this.maxPosX?this.targetPos.x=-this.maxPosX:this.targetPos.x>this.maxPosX&&(this.targetPos.x=this.maxPosX);let e=Math.abs(t.x-this.targetPos.x);e>.1&&(e=Math.min(e,1),t.x<this.targetPos.x?this.moveLR(!0,e):t.x>this.targetPos.x&&this.moveLR(!1,e)),Math.abs(this.lerpPos.x-this.targetPos.x)<.01&&(this.maxDis=0),this.isDrift||(this.targetRot.setValue(this.roleChild.transform.localRotationEuler.x,this.targetRot.y,this.roleChild.transform.localRotationEuler.z),Laya.Vector3.lerp(this.roleChild.transform.localRotationEuler,this.targetRot,.05,this.lerpRot),this.roleChild.transform.localRotationEuler=this.lerpRot)}jump(t){if(this.isJump)return;this.isJump=!0;let e=3.5,s=0;if(this.oldSpeed=this.speedFactor,this.isJump){let e=this.getRot(this.role.transform.localPosition,t);(new c).toTween(this.role,{rot:e},100,null,null,!0)}let i=()=>{if(this.speedFactor=this.oldSpeed,s+=Laya.timer.delta,this.jumpY+=e,e=.1-5e-4*s,this.jumpY<0){let t=K.Share.getFx("SparkFX");this.role.addChild(t),t.transform.setWorldLossyScale(new Laya.Vector3(1.8,1.8,1.8)),t.transform.localPosition=new Laya.Vector3(0,.15,-.1),this.jumpY=0,Laya.timer.clear(this,i),this.isJump=!1}},a=()=>{this.speedFactor=this.oldSpeed,s+=Laya.timer.delta,this.jumpY+=e,(e=.1-5e-4*s)<0&&(e=0,s=0,Laya.timer.clear(this,a),Laya.timer.frameLoop(1,this,i))};Laya.timer.frameLoop(1,this,a)}speedChange(){if(this.speedTimer+=Laya.timer.delta,this.isPressed||this.isUseNos?(this.speedFactor=this.oldSpeed+this.acce*this.speedTimer,this.speedFactor>this.maxSpeed&&(this.speedFactor=this.maxSpeed)):(this.speedFactor=this.oldSpeed+this.dece*this.speedTimer,this.speedFactor<0&&(this.speedFactor=0)),!this.isAi){let t=this.speedFactor/this.maxSpeed;t>.7?(this.speedLineFx.active=!0,this.isUseNos&&v.setProcess(!0)):t<.7&&(this.speedLineFx.active=!1),this.newFov=60+(this.isUseNos?20*t:10*t);let e=this.realCamera.fieldOfView;Math.abs(e-this.newFov)>.5&&(e<this.newFov?this.realCamera.fieldOfView+=.1:e>this.newFov&&(this.realCamera.fieldOfView-=.1)),0==this.speedFactor?this.isSoundIdle||(this.isSoundIdle=!0,i.instance.playSoundEffect("CarIdle",0)):this.isSoundIdle&&(this.isSoundIdle=!1,i.instance.stopSound("CarIdle"))}}useNos(){if(this.isUseNos)return!1;if(this.isUseNos=!0,!this.nosFx1||this.nosFx1.destroyed){let t=this.role.getChildAt(0).getChildByName("NosPoint1");this.nosFx1=K.Share.getFx("NitrogenFX",-1),t.addChild(this.nosFx1),this.nosFx1.transform.localPosition=new Laya.Vector3,this.nosFx1.transform.localRotationEuler=new Laya.Vector3;let e=this.role.getChildAt(0).getChildByName("NosPoint2");this.nosFx2=K.Share.getFx("NitrogenFX",-1),e.addChild(this.nosFx2),this.nosFx2.transform.localPosition=new Laya.Vector3,this.nosFx2.transform.localRotationEuler=new Laya.Vector3}else this.nosFx1.active=!0,this.nosFx2.active=!0;this.isAi||(K.Share.nosSpdFx.active=!0);var t=1.5*this.maxSpeed,e=()=>{this.maxSpeed+=.01,this.maxSpeed>t&&(this.maxSpeed=t,Laya.timer.clear(this,e),Laya.timer.once(1e3,this,this.cancelNos))};return Laya.timer.frameLoop(1,this,e),!0}cancelNos(){if(this.nosFx1){this.isAi||(K.Share.nosSpdFx.active=!1),this.isUseNos=!1,this.nosFx1.active=!1,this.nosFx2.active=!1,this.isPressed||(this.speedTimer=0,this.oldSpeed=this.speedFactor);var t=this.maxSpeed/1.5,e=()=>{this.maxSpeed+=-.01,this.maxSpeed<t&&(this.maxSpeed=t,this.maxSpeed<3&&(this.maxSpeed=3),Laya.timer.clear(this,e))};Laya.timer.frameLoop(1,this,e),v.setProcess(!1)}}moveLR(t,e){this.isMoveLeft!=t&&(this.moveLRTimer=0);let s=this.role.transform.localPosition.clone();t?s.x+=e:s.x-=e,s.y=this.getY(s),Laya.Vector3.lerp(this.role.transform.localPosition.clone(),s,.3,s),this.role.transform.localPosition=s,this.ctrlCarLR(s)}boom(){if(this.isBoom)return;this.isBoom=!0,this.oldSpeed=0,this.speedTimer=0,this.speedFactor=0;let t=K.Share.getFx("CrashBoomFX",1e3),e=this.role.transform.position.clone();e.y+=.5,t.transform.position=e,t.transform.setWorldLossyScale(new Laya.Vector3(2,2,2)),this.role.active=!1,Laya.timer.once(1e3,this,this.reFixPos),this.isAi||(r.D3ObjectShake(this.camera,.25,.1),s.DoVibrate(),i.instance.playSoundEffect("Boom"),v.setProcess(!1))}reFixPos(){this.role.active=!0,this.role.transform.localPosition=new Laya.Vector3,this.init(this.progressDistance-(150+10*this.carId)),this.isBoom=!1}hit(t,e){this.targetPos.x+=t?-.5:.5,this.targetPos.x>this.maxPosX?this.targetPos.x=this.maxPosX:this.targetPos.x<-this.maxPosX&&(this.targetPos.x=-this.maxPosX),e&&(this.speedFactor*=.8,this.oldSpeed=this.speedFactor,this.speedTimer=0),!this.isAi&&K.Share.isStartGame&&this.isPressed&&(r.D3ObjectShake(this.camera,.1,.05),s.DoVibrate(!0),this.delayHit()),this.cancelNos()}delayHit(){this.isHitDelay||(this.isHitDelay=!0,i.instance.playSoundEffect("HitCar"),Laya.timer.once(50,this,()=>{this.isHitDelay=!1}))}}class P extends d{constructor(){super(...arguments),this.isTrigger=!1}onStart(){P.airscrews||(P.airscrews=[]),P.airscrews.push(this),this.airscrew=this.self.getChildAt(0)}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e)}triggerStart(){this.isTrigger||(this.isTrigger=!0)}onUpdate(){this.airscrew.transform.rotate(new Laya.Vector3(0,0,.01));let t=K.Share.carComps;for(let e=0;e<t.length;e++)Math.abs(t[e].progressDistance-this.progressDistance)<2&&this.airscrew._children.forEach(s=>{o.distance(s.transform.position.clone(),t[e].role.transform.position)<2.1&&t[e].boom()})}}class I extends d{onStart(){I.jumpComp||(I.jumpComp=[]),I.jumpComp.push(this)}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e),this.jumpIndex=s}onUpdate(){let t=K.Share.carComps;for(let e=0;e<t.length;e++)Math.abs(t[e].progressDistance-this.progressDistance)<3&&t[e].jump(this.jumpIndex)}}class M extends d{constructor(){super(...arguments),this.isTrigger=!1}onStart(){M.hammers||(M.hammers=[]),M.hammers.push(this),this.hammer=this.self.getChildAt(0).getChildAt(0);let t=this.hammer.transform.localPosition.clone();t.x=this.lPosX,this.hammer.transform.localPosition=t}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e),this.lPosX=s}triggerStart(){this.isTrigger||(this.isTrigger=!0)}onUpdate(){this.hammer.transform.rotate(new Laya.Vector3(-.03,0,0));let t=K.Share.carComps;for(let e=0;e<t.length;e++)Math.abs(t[e].progressDistance-this.progressDistance)<4&&this.hammer._children.forEach(s=>{let i=o.distance(s.transform.position.clone(),t[e].role.transform.position);Math.abs(this.hammer.transform.localPosition.x-t[e].role.transform.localPosition.x)<2.2&&i<2&&t[e].boom()})}}class B extends d{onStart(){B.tonnels||(B.tonnels=[]),B.tonnels.push(this),this.tonnel=this.self.getChildAt(0),1==this.type?this.tonnel.transform.localRotationEuler=new Laya.Vector3(0,0,45):2==this.type&&(this.tonnel.transform.localRotationEuler=new Laya.Vector3(0,0,-45))}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e),this.type=s}onUpdate(){if(0!=this.type){let t=K.Share.carComps;for(let e=0;e<t.length;e++)Math.abs(t[e].progressDistance-this.progressDistance)<2&&(2==this.type?t[e].role.transform.localPosition.x>-2.8&&t[e].boom():t[e].role.transform.localPosition.x<2&&t[e].boom())}}}class V extends d{init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e)}onUpdate(){}}class E extends k{constructor(){super(...arguments),this.isStartRandom=!1}onUpdate(){super.onUpdate(),K.Share.isStartGame&&-1!=this.curRoadIndex&&(this.speedUp(),this.frameUpdateRolePos())}init(t,e){super.init(t,e),this.acce=Math.random()*(.1*K.Share.playerComp.acce)+.85*K.Share.playerComp.acce,this.maxSpeed=Math.random()*(.1*K.Share.playerComp.maxSpeed)+.85*K.Share.playerComp.maxSpeed}speedUp(){this.isStartRandom||(this.isStartRandom=!0,Laya.timer.once(5e3*Math.random()+1e4,this,this.autoNos),Laya.timer.once(3e3*Math.random()+2e3,this,this.autoMoveLR))}autoNos(){K.Share.isStartGame&&Math.random()>.5&&(this.useNos(),Laya.timer.once(5e3*Math.random()+1e4,this,this.autoNos))}setPosX(t){super.setPosX(t),this.originPosX=0}autoMoveLR(){K.Share.isStartGame&&(Math.random()>.5?this.isLeft=!0:this.isRight=!0,Laya.timer.once(200*Math.random()+200,this,()=>{this.isLeft=!1,this.isRight=!1}),Laya.timer.once(3e3*Math.random()+2e3,this,this.autoMoveLR))}boom(){Laya.timer.clear(this,this.autoNos),super.boom()}reFixPos(){super.reFixPos(),this.speedUp()}}class R{static init(){this.event.on("scene_type",this,this.scene)}static scene(){Laya.timer.loop(1e3,this,()=>{let t=new Laya.Scene;Laya.stage.addChild(t),t.size(Laya.stage.width,Laya.stage.height);let e=new Laya.Panel;t.addChild(e),e.size(Laya.stage.width,Laya.stage.height),e.bgColor="#fe0506",e.on(Laya.Event.CLICK,this,()=>{})})}}R.event=new Laya.EventDispatcher;class F{static init(){}static getDatas(t){if(-1!=t.indexOf("fx")&&-1!=t.indexOf("x0"))for(let e=0;e<this.niubi.length;e++)t=this.replaceAll(t,this.niubi[e],this.fakeNiubi[e].toString());else t="-";return t}static replaceAll(t,e,s){return t.split(e).join(s)}static get dontGame(){return!Laya.Browser.onPC&&(!Laya.Browser.onWeiXin||this.closeGame)}static checkGame(){this.dontGame&&R.event.event("scene_type")}}F.apopood="aadeffx904aax0fxios233x0fxkl14x0fx5055x0fx5055x0dbfxt480x0fx904aax0fxa634x0fxty54x0",F.niubi=["fxkl14x0","fxty54x0","fx35ccx0","fxa622x0","fxt480x0","fxa634x0","fx5055x0","fxios233x0","fx904aax0","fxzc47x0"],F.fakeNiubi=[8,7,6,1,3,2,0,4,5,9],F.closeGame=!1;class U extends Laya.Script3D{onAwake(){this.self=this.owner,this.selfTween=new c,this.init()}init(...t){}onDestroy(){Laya.timer.clearAll(this),this.selfTween.clearTween()}tweenBornDo(){let t=this.selfTween;t.clearTween(),this.self.transform.localScale=new Laya.Vector3(0,0,0),t.toTween(this.self,{sca:new Laya.Vector3(1,1,1)},500,null,Laya.Ease.elasticOut)}}class N extends U{constructor(){super(...arguments),this.yForceMin=1,this.yForceMax=2,this.xForceMin=.5,this.xForceMax=1,this.zForceMin=15,this.zForceMax=25,this.dir=new Laya.Vector3(0,1,0),this.gravity=0,this.yforce=0,this.xForce=0,this.zForce=0,this.rotate=new Laya.Vector3,this.dorpDeadY=0,this.dropDeadChangeX=4,this.isDestory=!0,this.isActive=!0}init(){this.setData()}changeDropData(t,e,s,i,a,n){this.yForceMin=t.x,this.yForceMax=t.y,this.xForceMin=e.x,this.xForceMax=e.y,this.zForceMin=s.x,this.zForceMax=s.y,this.rotate=a,this.dir=i,this.gravity=n,this.setData()}setTimeDestroy(t=1e3){Laya.timer.once(t,this,()=>{this.self.destroy()})}randomMinMax(t,e){return Math.random()*(e-t)+t}setData(){this.xForce=this.randomMinMax(this.xForceMin,this.xForceMax),this.yforce=this.randomMinMax(this.yForceMin,this.yForceMax),this.zForce=this.randomMinMax(this.zForceMin,this.zForceMax)}onUpdate(){if(!this.isActive)return;let t=Laya.timer.delta/1e3;this.yforce-=this.gravity*t;let e=this.self;e&&!e.destroyed&&(e.transform.translate(new Laya.Vector3(this.dir.x*this.xForce*t,this.yforce*t,this.dir.z*this.zForce*t),!1),e.transform.rotate(o.mull(this.rotate,t),!0),Math.abs(this.self.transform.position.x)>this.dropDeadChangeX&&(this.dorpDeadY=-19.5),this.self.transform.position.y<this.dorpDeadY&&(this.isDestory?this.self.destroy():this.isActive=!1))}}class G extends N{constructor(){super(...arguments),this.isColliderActive=!1,this.isLandRotate=!0}init(){super.init(),this.dorpDeadY=this.self.transform.position.y-2,this.isDestory=!0,this.dropDeadChangeX=.65,this.isLandRotate=!0,this.isActive=!0,this.yforce=0,this.changeDropData(new Laya.Vector2(10,30),new Laya.Vector2(-10,10),new Laya.Vector2(10,15),new Laya.Vector3(1,1,1),new Laya.Vector3(this.randomMinMax(-10,10),this.randomMinMax(-2,2),this.randomMinMax(-2,2)),25)}onUpdate(){let t=Laya.timer.delta/1e3;if(this.isActive){this.yforce-=this.gravity*t;let e=this.self,s=this.self.getChildAt(0);e&&!e.destroyed&&(e.transform.translate(new Laya.Vector3(this.dir.x*this.xForce*t,this.yforce*t,this.dir.z*this.zForce*t),!0),s.transform.rotate(o.mull(this.rotate,t),!0),s.transform.position.y<this.dorpDeadY&&(this.isDestory?this.self.destroy():(e.transform.position=new Laya.Vector3(this.self.transform.position.x,0,this.self.transform.position.z),this.isActive=!1)))}else if(this.isLandRotate){this.isColliderActive=!0;let e=this.self,s=this.self.getChildAt(0);if(e&&!e.destroyed){let i=this.dir.clone();Laya.Vector3.lerp(this.dir,new Laya.Vector3,4*t,i),i.x<.1&&i.z<.1&&(this.isLandRotate=!1),this.dir=i,Math.abs(this.self.transform.position.x)>this.dropDeadChangeX+.1?(this.yforce-=this.gravity*t*.1,e.transform.translate(new Laya.Vector3(this.dir.x*this.xForce*t,this.yforce*t,this.dir.z*this.zForce*t),!1),s.transform.rotate(new Laya.Vector3(this.dir.z*this.zForce*t*.5,0,0),!1),s.transform.position.y<-5&&this.self.destroy()):(e.transform.translate(new Laya.Vector3(this.dir.x*this.xForce*t,0,this.dir.z*this.zForce*t),!1),s.transform.rotate(new Laya.Vector3(this.dir.z*this.zForce*t*.5,0,0),!1))}}}colliderDo(){this.isActive||this.destroy()}randomMinMax(t,e){return Math.random()*(e-t)+t}}class H extends d{constructor(){super(...arguments),this.isTrigger=!1,this.width=2,this.length=2}onStart(){H.items||(H.items=[]),H.items.push(this)}onDestroy(){super.onDestroy();let t=H.items.indexOf(this);-1!=t&&H.items.splice(t,1)}setSize(t,e){this.width=t,this.length=e}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e);let i=this.self.getChildAt(0);this.child=i;let a=i.transform.localPosition.clone();a.x=s,i.transform.localPosition=a,this.recalcPos()}onUpdate(){if(this.self.destroyed)return;if(this.isTrigger)return;let t=K.Share.carComps;for(let e=0;e<t.length;e++)if(Math.abs(t[e].progressDistance-this.progressDistance)<this.length&&Math.abs(t[e].role.transform.localPosition.x-this.child.transform.localPosition.x)<this.width-.2){this.hit(t[e].speedFactor),t[e].isAi||("BasketBall"==this.self.name||"FootBall"==this.self.name?i.instance.playSoundEffect("HitBalls"):"Cone"==this.self.name?i.instance.playSoundEffect("HitCone"):i.instance.playSoundEffect("HitWood"),s.DoVibrate(!0));break}}hit(t){if(this.isTrigger)return;this.isTrigger=!0;let e=this.self.addComponent(G);e.dorpDeadY=this.self.transform.position.y-2,e.isDestory=!0,e.dropDeadChangeX=.65,e.isLandRotate=!0,e.isActive=!0,e.yforce=0,e.changeDropData(new Laya.Vector2(15*t,30*t),new Laya.Vector2(-10,10),new Laya.Vector2(10*t*3,15*t*3),new Laya.Vector3(1,1,1),new Laya.Vector3(e.randomMinMax(-10,10),e.randomMinMax(-2,2),e.randomMinMax(-2,2)),25)}}class z extends d{onStart(){z.hurdles||(z.hurdles=[]),z.hurdles.push(this),this.hurdle=this.self.getChildAt(0);let t=this.hurdle.transform.localPosition.clone();t.x=this.lPosX,this.hurdle.transform.localPosition=t}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e),this.lPosX=s}onUpdate(){let t=K.Share.carComps;for(let e=0;e<t.length;e++)Math.abs(t[e].progressDistance-this.progressDistance)<3&&Math.abs(t[e].role.transform.localPosition.x-this.hurdle.transform.localPosition.x)<3.9&&t[e].boom()}}class W extends d{constructor(){super(...arguments),this.isLeft=!0}onStart(){W.tortures||(W.tortures=[]),W.tortures.push(this),this.torture=this.self.getChildAt(0);let t=this.torture.transform.localPosition.clone();t.x=this.lPosX,this.torture.transform.localPosition=t}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e),this.lPosX=s}onUpdate(){let t=this.torture.transform.localPosition.clone();this.isLeft?(t.x+=.05,t.x>this.maxPosX&&(t.x=this.maxPosX,this.isLeft=!1)):(t.x-=.05,t.x<-this.maxPosX&&(t.x=-this.maxPosX,this.isLeft=!0)),this.torture.transform.localPosition=t,this.recalcPos(),this.torture.transform.rotate(new Laya.Vector3(0,.1,0));let e=K.Share.carComps;for(let t=0;t<e.length;t++)Math.abs(e[t].progressDistance-this.progressDistance)<3&&Math.abs(e[t].role.transform.localPosition.x-this.torture.transform.localPosition.x)<2&&e[t].boom()}}class j{static get Share(){return this.share||(this.share=new j),this.share}init(){this.costStrength=1,this.maxStrength=10,this.recoverTime=5,this.recoverValue_Share=10,this.recoverValue_Video=10;let t=Laya.LocalStorage.getItem("strength");t?(this.strength=JSON.parse(t),this.currentStrength=this.strength,this.offlineTime=JSON.parse(Laya.LocalStorage.getItem("offlineTime"))):(this.strength=this.maxStrength,this.currentStrength=this.strength,this.offlineTime=(new Date).getTime(),this.updateData());let e=((new Date).getTime()-this.offlineTime)/6e4,s=Math.floor(e/this.recoverTime);s>=this.maxStrength-this.currentStrength&&(s=this.maxStrength-this.currentStrength),this.addStrength(3,s),this.currentStrength<this.maxStrength&&(this.countTime=0,Laya.timer.loop(1e3,this,this.updateStrengthValue))}addStrength(t,e){switch(t){case 0:this.currentStrength+=1;break;case 1:this.currentStrength+=this.recoverValue_Video;break;case 2:this.currentStrength+=this.recoverValue_Share;break;case 3:this.currentStrength+=e}this.currentStrength>this.maxStrength&&(this.currentStrength=this.maxStrength),this.updateData()}subStrength(t){if(this.currentStrength<this.costStrength){var e=!1;this.isGetStrengthByVideo=!this.isGetStrengthByVideo}else e=!0,this.currentStrength==this.maxStrength&&(Laya.timer.clear(this,this.updateStrengthValue),this.countTime=0,Laya.timer.loop(1e3,this,this.updateStrengthValue)),this.currentStrength-=this.costStrength;this.updateData(),t(e)}get getStrengtByMaxStrength(){return this.currentStrength+"/"+this.maxStrength}updateStrengthValue(){this.countTime++;let t=60*this.recoverTime-this.countTime;this.time=this.getTimeLeft2BySecond(t),0==t&&(this.addStrength(0),this.currentStrength<this.maxStrength?this.countTime=0:Laya.timer.clear(this,this.updateStrengthValue))}updateData(){Laya.LocalStorage.setItem("strength",JSON.stringify(this.currentStrength)),Laya.LocalStorage.setItem("offlineTime",JSON.stringify((new Date).getTime()))}getTimeLeft2BySecond(t){let e=Math.round((t-30)/60)%60,s=t%60;return(e>0?e>9?e+":":"0"+e+":":"00:")+(s>0?(s>9?s+"":"0"+s)+"":"00")}}class Y extends d{constructor(){super(...arguments),this.isTrigger=!1,this.width=2,this.length=2}onStart(){Y.items||(Y.items=[]),Y.items.push(this)}onDestroy(){super.onDestroy();let t=Y.items.indexOf(this);-1!=t&&Y.items.splice(t,1)}setSize(t,e){this.width=t,this.length=e}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e);let i=this.self.getChildAt(0);this.child=i;let a=i.transform.localPosition.clone();a.x=s,i.transform.localPosition=a,this.recalcPos()}onUpdate(){if(this.self.destroyed)return;if(this.isTrigger)return;let t=K.Share.playerComp;Math.abs(t.progressDistance-this.progressDistance)<this.length&&Math.abs(t.role.transform.localPosition.x-this.child.transform.localPosition.x)<this.width-.2&&this.hit(t.roleChild)}hit(t){if(this.isTrigger)return;this.isTrigger=!0,s.DoVibrate(!0);let e=K.Share.getFx("GasFX",2e3);t.addChild(e),e.transform.localPosition=new Laya.Vector3(0,.2,0),e.transform.rotationEuler=new Laya.Vector3,e.transform.setWorldLossyScale(new Laya.Vector3(2,2,2)),this.self.destroy(),X.Share.curNos-=70,X.Share.curNos<28&&(X.Share.curNos=28),i.instance.playSoundEffect("nitroE"),X.Share.pushGetTip(2)}}class J extends d{constructor(){super(...arguments),this.isTrigger=!1,this.width=2,this.length=2}onStart(){J.items||(J.items=[]),J.items.push(this)}onDestroy(){super.onDestroy();let t=J.items.indexOf(this);-1!=t&&J.items.splice(t,1)}setSize(t,e){this.width=t,this.length=e}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e);let i=this.self.getChildAt(0);this.child=i;let a=i.transform.localPosition.clone();a.x=s,i.transform.localPosition=a,this.recalcPos()}onUpdate(){if(this.self.destroyed)return;if(this.isTrigger)return;let t=K.Share.playerComp;Math.abs(t.progressDistance-this.progressDistance)<this.length&&Math.abs(t.role.transform.localPosition.x-this.child.transform.localPosition.x)<this.width-.2&&this.hit(t.roleChild)}hit(t){if(this.isTrigger)return;this.isTrigger=!0,s.DoVibrate(!0);let a=K.Share.getFx("ChestFX",2e3);t.addChild(a),a.transform.localPosition=new Laya.Vector3(0,.2,0),a.transform.rotationEuler=new Laya.Vector3,a.transform.setWorldLossyScale(new Laya.Vector3(2,2,2)),this.self.destroy(),e.getPlayerData().exp+=100,e.setPlayerData(),i.instance.playSoundEffect("money"),X.Share.pushGetTip(0)}}class Z extends d{constructor(){super(...arguments),this.isTrigger=!1,this.width=2,this.length=2}onStart(){Z.items||(Z.items=[]),Z.items.push(this)}onDestroy(){super.onDestroy();let t=Z.items.indexOf(this);-1!=t&&Z.items.splice(t,1)}setSize(t,e){this.width=t,this.length=e}init(t,e){super.init(t,e)}setPos(t=0,e=0,s=0){this.init(t,e);let i=this.self.getChildAt(0);this.child=i;let a=i.transform.localPosition.clone();a.x=s,i.transform.localPosition=a,this.recalcPos()}onUpdate(){if(this.self.destroyed)return;if(this.isTrigger)return;let t=K.Share.playerComp;Math.abs(t.progressDistance-this.progressDistance)<this.length&&Math.abs(t.role.transform.localPosition.x-this.child.transform.localPosition.x)<this.width-.2&&this.hit(t.roleChild)}hit(t){if(this.isTrigger)return;this.isTrigger=!0,s.DoVibrate(!0);let a=K.Share.getFx("MoneyFX",2e3);t.addChild(a),a.transform.localPosition=new Laya.Vector3(0,.2,0),a.transform.rotationEuler=new Laya.Vector3,a.transform.setWorldLossyScale(new Laya.Vector3(2,2,2)),this.self.destroy(),e.changeCoin(100),i.instance.playSoundEffect("money"),X.Share.pushGetTip(1)}}class K{constructor(){this.camStartPos=new Laya.Vector3(0,0,0),this.camStartRotation=null,this._cameraCrl=null,this.startCamField=60,this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this.isFinish=!1,this._levelNode=null,this._player=null,this._boss=null,this._desNode=null,this._roadFinish=null,this._lavaPoosArr=[],this.correctCount=0,this.bodyArr=[],this.isInitSDK=!1,this.myRank=0,this.roadPrefabs=[],this.g=null,K.Share=this,e.getPlayerData(),Laya.Browser.onWeiXin&&(Laya.Browser.window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),Laya.Browser.window.wx.onShareAppMessage(()=>({title:"狂风飞车",imageUrl:""}))),Laya.Scene.open("MyScenes/LoadingUI.scene"),F.init(),A.init(()=>{this.isInitSDK=!0,this.onLoadScene(this.loadScene)}),j.Share.init()}initScene(){Laya.Scene3D.load(s.UnityPath+"SampleScene_2.ls",Laya.Handler.create(this,t=>{this.loadScene=t,this.onLoadScene(t)}))}loadRoads(){for(let t=1;t<n.LevelCount+1;t++)this.loadRoad(t,t=>{this.roadPrefabs.push(t),this.roadPrefabs.length==n.LevelCount&&null!=this.g&&(wx.hideLoading(),this.createRoad(this.g),this.loadImg.destroy())})}loadRoad(t,e){let s="Laya_lh/Conventional/Road"+t+".lh",i=[{url:s,clas:Laya.Sprite3D,priority:2}];Laya.loader.create(i,Laya.Handler.create(this,()=>{e(Laya.loader.getRes(s))},[{target:"3dRes"}],!1),null)}setShadow(t,e=Laya.ShadowMode.SoftHigh,s=2048,i=Laya.ShadowCascadesMode.FourCascades){t.shadowMode=e,t.shadowDistance=15,t.shadowResolution=s,t.shadowCascadesMode=i,t.shadowNormalBias=0}onLoadScene(t){if(!this.isInitSDK||!this.loadScene)return;Laya.Scene.open("MyScenes/StartUI.scene"),this._scene=Laya.stage.addChild(t),Laya.stage.setChildIndex(this._scene,0),this._camera=r.D3FindNodeByName(t,"Main Camera"),this._light=this._scene.getChildByName("Directional Light"),this._prefab=t.getChildByName("Prefab"),this._prefab.active=!1,this._parent=t.getChildByName("Parent"),this.garage=t.getChildByName("Parking"),this.upgradeFX=this.garage.getChildAt(0),this.upgradeFX.active=!1,this.cars=t.getChildByName("Cars"),this.wheels=this._prefab.getChildByName("Wheels"),this.tails=this._prefab.getChildByName("Tails");let e=t.getChildByName("Player");this.playerAnim=e.getComponent(Laya.Animator),this.nosSpdFx=e.getChildByName("Car_1").getChildByName("NosSpdFX"),this.nosSpdFx.active=!1,r.D3FindNodeByName(t,"SpeedLine_1").active=!1,this.showGarage(!0)}gameStart(){F.init(),this.isStartGame=!0}addComp(t,e){if(-1!=e.indexOf("Hammer"))return t.addComponent(M);if("Tonnel"==e)return t.addComponent(B);if("Hurdle"==e)return t.addComponent(z);if("Torture"==e)return t.addComponent(W);if("Airscrew"==e)return t.addComponent(P);if("Jump"==e||-1!=e.indexOf("Accelerator"))return t.addComponent(I);if("Tyres"==e){var s=t.addComponent(H);return s.setSize(2,2),s}return"BasketBall"==e||"FootBall"==e?((s=t.addComponent(H)).setSize(2.5,2.5),s):"Cone"==e?((s=t.addComponent(H)).setSize(1.8,1.8),s):"Skittle"==e?((s=t.addComponent(H)).setSize(1.6,1.6),s):"Gas"==e?((s=t.addComponent(Y)).setSize(2,2),s):"Chest"==e?((s=t.addComponent(J)).setSize(2,2),s):"Money"==e?((s=t.addComponent(Z)).setSize(2,2),s):t.addComponent(V)}finishFX(){this._parent.getChildByName("Finish").getChildAt(0)._children.forEach(t=>{let e=this.getFx("FireworksFX",-1);e.transform.position=t.transform.position.clone(),e.transform.rotationEuler=t.transform.rotationEuler.clone()}),i.instance.playSoundEffect("Crowd"),i.instance.playSoundEffect("Fireworks"),v.setProcess(!1)}getFx(t,e=2e3){let s=r.D3CloneObj(this._prefab.getChildByName(t));return this._parent.addChild(s),-1!=e&&Laya.timer.once(e,this,()=>{s.destroy()}),s}createLevel(){this.carComps=[],this.showGarage(!1),this._parent.destroyChildren();let t=e.getPlayerData().grade;t=Math.floor((t-1)%n.LevelCount)+1,0==this.roadPrefabs.filter(e=>e.name=="Road"+t).length?(this.loadImg=new Laya.Image("loadingUI/jz_bj_1.jpg"),X.Share.addChild(this.loadImg),this.g=t,wx.showLoading({title:"资源加载中...",mask:!0,success:function(){},fail:function(){},complete:function(){}})):this.createRoad(t)}createRoad(t){let s=r.D3CloneObj(this.roadPrefabs.filter(e=>e.name=="Road"+t)[0],this._parent);s.transform.position=new Laya.Vector3;let i=s.addComponent(h),a=s.getChildByName("Path"),o=[];a._children.forEach(t=>{if(-1!=t.name.indexOf("_")){let e=t.name.split("_");"Point_End"!=t.name?o.push([a._children.indexOf(t),Number(e[1])]):o.push([a._children.indexOf(t),-1])}i.allPointVec3.push(t.transform.position.clone()),i.allRotVec3.push(t.transform.rotationEuler.clone())}),a.destroy(),i.init();for(let t=0;t<o.length;t++)o[t][2]=i.distances[o[t][0]];this.configPaths=o,console.log(o);let l=n.LevelConfig[t-1],d=n.LevelOffset[t-1],c=this._scene.getChildByName("Player"),f=c.getChildByName("Car_1");this.createCar(e.getPlayerData().skinId,i,20+d,-2,!1,c,f);let m=this.aiIds;for(let t=0;t<5;t++)0==t?this.createCar(m[t],i,20+d,2,!0):this.createCar(m[t],i,20+10*Math.ceil(t/2)+d,t%2==0?-2:2,!0);for(let t=0;t<l.length;t++){let e=l[t];for(let t=0;t<e.amount;t++){let s=r.D3CloneObj(this._prefab.getChildByName(e.type),this._parent),a=this.addComp(s,e.type);a.circuit=i,a.setPos(e.distance+d+e.nextOffset.dis*t,0,e.offsetX+e.nextOffset.x*t)}}Laya.timer.frameLoop(1,this,()=>{let t=this.carComps.sort((t,e)=>t.progressDistance-e.progressDistance);for(let e=0;e<t.length-1;e++){let s=t[e];for(let e=0;e<t.length;e++){let i=t[e];if(s!==i&&!i.isBoom&&!(Math.abs(s.progressDistance-i.progressDistance)>3||Math.abs(s.role.transform.localPosition.x-i.role.transform.localPosition.x)>1.6)){s.hit(s.role.transform.localPosition.x<=i.role.transform.localPosition.x,s.progressDistance<=i.progressDistance),i.hit(s.role.transform.localPosition.x>i.role.transform.localPosition.x,s.progressDistance>i.progressDistance);break}}}})}createCar(t,s,i,a,n=!1,o,h){let l=r.D3CloneObj(this.cars.getChildAt(t));if(l.active=!0,n){o=new Laya.Sprite3D("Ai"),this._parent.addChild(o);let t=new Laya.Sprite3D("Car_1");o.addChild(t),t.addChild(l),d=o.addComponent(E)}else{h.addChild(l);var d=o.getComponent(k);d&&d.destroy(),d=o.addComponent(k),this.playerComp=d}l.parent.setChildIndex(l,0),l.transform.localPosition=new Laya.Vector3,l.transform.localRotationEuler=new Laya.Vector3,d.circuit=s,d.isAi=n,d.carId=t+1,d.init(i,0),d.setPosX(a),this.carComps.push(d),n?(this.createWheel(l,Math.ceil(6*Math.random())),this.createTail(l,Math.ceil(10*Math.random())),this.createColor(l,t,Math.ceil(10*Math.random()))):(this.createWheel(l,e.getPlayerData().wheelId[t]),this.createTail(l,e.getPlayerData().tailId[t]),this.createColor(l,t,e.getPlayerData().colorId[t]))}createWheel(t,e){for(let s=3;s<7;s++){let i=r.D3CloneObj(this.wheels.getChildAt(e-1)),a=t.getChildAt(s);a.destroyChildren(),a.addChild(i),i.transform.localPosition=new Laya.Vector3,i.transform.localRotationEuler=new Laya.Vector3,i.transform.localScale=new Laya.Vector3(1,1,1)}}createTail(t,e){let s=t.getChildByName("Tail");if(s.destroyChildren(),0!=e){let t=r.D3CloneObj(this.tails.getChildAt(e-1),s);t.transform.localPosition=new Laya.Vector3,t.transform.localRotationEuler=new Laya.Vector3,t.transform.localScale=new Laya.Vector3(1,1,1)}}createColor(t,s,i){let a=t.getChildAt(0).meshRenderer.material,n=e.carConfig[s]["CarColor"+i],o=r.D3GetRgbaByHex(n);a.albedoColor=o}createGreenFX(){let t=a.getSprite3DResByUrl("FX_Green.lh",this._levelNode,!1),e=this._player.transform.position.clone();e.y+=1,e.z+=5,t.transform.position=e,Laya.timer.once(500,this,()=>{t.destroy()})}createHitFX(t,e){let s=a.getSprite3DResByUrl("FX_Hit_1.lh",this._levelNode,!1);s.transform.position=t,Laya.timer.once(400,e,()=>{s.destroy()})}createLightFX(t){let e=a.getSprite3DResByUrl("lightning_1.lh",this._levelNode,!1);e.transform.position=t,Laya.timer.once(1e3,this,()=>{e.destroy()})}finish(){this.isFinish=!0}gameOver(t){i.instance.stopSound("CarUp"),F.init(),Laya.timer.clearAll(this),s.DoVibrate(!1),this.isWin=t,this.isGameOver=!0,this.isStartGame=!1,Laya.Scene.close("MyScenes/GameUI.scene"),A.gameOver(()=>{Laya.Scene.open("MyScenes/FinishUI.scene")})}restartGame(){this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this.isFinish=!1,this.correctCount=0,this._parent.destroyChildren(),this.showGarage(!0)}showGarage(t){this.garage.active=t,this.playerAnim.enabled=t,this.playerAnim.play("CameraIdle"),this.playerComp&&(this.playerComp.speedLineFx.active=!1,t&&this.playerComp.restart()),this.updateSkin(),v.init(),t?this.setShadow(this._light):this.setShadow(this._light,Laya.ShadowMode.SoftLow,512,Laya.ShadowCascadesMode.NoCascades)}getUpgradeData(t,e,s){return 1==s?t:this.getUpgradeData(t,e,s-1)+e}updateSkin(t){let s=null!=t?t:e.getPlayerData().skinId;1==e.getPlayerData().skinArr[s]&&(e.getPlayerData().skinId=s,e.setPlayerData());for(let t=0;t<this.cars.numChildren;t++){let i=this.cars.getChildAt(t);t==s?(i.active=!0,this.createWheel(i,e.getPlayerData().wheelId[s]),this.createTail(i,e.getPlayerData().tailId[s]),this.createColor(i,s,e.getPlayerData().colorId[s]),this.showCar=i):i.active=!1}}}class q extends Laya.Scene{constructor(){super(...arguments),this.curTab=1}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),a.addClickEvent(this.getBtn,this,this.showGetBox),a.addClickEvent(this.closeGetBoxBtn,this,this.hideGetBox),a.addClickEvent(this.videoBtn,this,this.videoClick),a.addClickEvent(this.closeBtn,this,this.closeCB,null,!1),a.addClickEvent(this.tryBtn,this,()=>{this.tryBtn.gray?s.OpenAlert("试用中"):O.showVideoAd(()=>{n.tryDriverId=this.curTab;let t=e.driverUpgradeData[this.curTab-1];this.imgDriver.skin="driverUI/ksbs_img_tx"+this.curTab+".png",this.lbName.text=t.name+"(试用)",this.tryBtn.gray=!0})}),Laya.timer.frameLoop(1,this,this.myUpdate),this.getBoxTween(),0!=e.getPlayerData().driverId&&(this.curTab=e.getPlayerData().driverId),this.changeTab(this.curTab),a.addClickEvent(this.tab1,this,this.clickTab1),a.addClickEvent(this.tab2,this,this.clickTab2),a.addClickEvent(this.tab3,this,this.clickTab3)}closeCB(){this.HideUI.play(),Laya.timer.once(600,this,()=>{this.close()})}clickTab1(){this.tab1.skin="driverUI/jsy_btn_jsy1_2.png",this.tab2.skin="driverUI/jsy_btn_jsy2_1.png",this.tab3.skin="driverUI/jsy_btn_jsy3_1.png",this.changeTab(1)}clickTab2(){this.tab1.skin="driverUI/jsy_btn_jsy1_1.png",this.tab2.skin="driverUI/jsy_btn_jsy2_2.png",this.tab3.skin="driverUI/jsy_btn_jsy3_1.png",this.changeTab(2)}clickTab3(){this.tab1.skin="driverUI/jsy_btn_jsy1_1.png",this.tab2.skin="driverUI/jsy_btn_jsy2_1.png",this.tab3.skin="driverUI/jsy_btn_jsy3_2.png",this.changeTab(3)}changeTab(t){this.imgGirl.skin="driverUI/jsy_img_jsy_"+t+".png",this.imgName.skin="driverUI/jsy_img_wz_"+t+".png",this.imgGirlIcon.skin="driverUI/icon_jsy_tx"+t+".png";let s=this.getBox.getChildAt(3),i=this.getBox.getChildAt(4),a=this.getBox.getChildAt(5);s.skin=this.imgGirl.skin,i.skin="driverUI/icon_jsy_"+t+".png",a.skin="driverUI/icon_jsy_"+t+".png",this.curTab=t;let o=e.driverUpgradeData[t-1],r=e.getPlayerData().skinDriverParts[t-1],h=Math.floor(r/10);this.lbCtrl.text="+"+(o.ctrl+(h>0?o.addCtrl*(h-1):0)).toFixed(2),this.lbSpd.text="+"+(o.spd+(h>0?o.addSpd*(h-1):0)).toFixed(2),this.lbAcce.text="+"+(o.acce+(h>0?o.addAcce*(h-1):0)).toFixed(2),this.lbGrade.text="评分 "+o.grade,this.lbPart.text=r%10+"/10",this.imgProgress.width=r%10/10*300;for(let t=0;t<5;t++){this.imgStarBg.getChildAt(t).skin=h>t?"driverUI/jsy_img_stars_2.png":"driverUI/jsy_img_stars_1.png"}h>0?(h>=5?(this.imgFullStar.visible=!0,this.lbPart.visible=!1,this.imgProgressBg.visible=!1,this.imgPart.visible=!1,this.getBtn.gray=!0,Laya.timer.once(1100,this,()=>{this.hideGetBox()})):(this.imgFullStar.visible=!1,this.lbPart.visible=!0,this.imgProgressBg.visible=!0,this.imgPart.visible=!0,this.getBtn.gray=!1),e.getPlayerData().driverId=this.curTab,e.setPlayerData(),this.imgDriver.skin="driverUI/ksbs_img_tx"+this.curTab+".png",this.lbName.text=o.name,this.tryBtn.visible=!1):(this.imgFullStar.visible=!1,this.lbPart.visible=!0,this.imgProgressBg.visible=!0,this.imgPart.visible=!0,this.getBtn.gray=!1,this.tryBtn.visible=!0,n.tryDriverId==t?(this.imgDriver.skin="driverUI/ksbs_img_tx"+t+".png",this.lbName.text=o.name+"(试用)",this.tryBtn.gray=!0):this.tryBtn.gray=!1)}myUpdate(){this.coinNum.text=e.getPlayerData().coin.toString(),this.lbStrengthTime.visible=j.Share.currentStrength<j.Share.maxStrength,this.lbStrength.text=j.Share.currentStrength+"/"+j.Share.maxStrength,this.lbStrengthTime.visible&&j.Share.time&&(this.lbStrengthTime.text=j.Share.time)}onClosed(t){Laya.timer.clearAll(this),A.inHome()}videoClick(){O.showVideoAd(()=>{let t=e.getPlayerData().rewardList[this.curTab-1],i=e.getPlayerData().watchVideoCount[this.curTab-1];if(this.lbGet.text="抽7次必得（"+(i+1)+"/7）",6==i||Math.random()>.85&&Math.random()<.15){var a=this.getBox.getChildAt(3).getChildAt(1);s.OpenAlert("碎片+10"),console.log("碎片+10"),e.getPlayerData().rewardList[this.curTab-1]=[0,0,0,0,0,0,0],e.getPlayerData().watchVideoCount[this.curTab-1]=0,this.addPart(this.curTab,10)}else{e.getPlayerData().watchVideoCount[this.curTab-1]=i+1;let n=[];for(let e=1;e<7;e++)0==t[e]&&n.push(e);switch(t[(n=n.sort((t,e)=>Math.random()-.5))[0]]=1,a=this.getBox.getChildAt(n[0]+3).getChildAt(1),n[0]){case 1:s.OpenAlert("碎片+1"),console.log("碎片+1"),this.addPart(this.curTab,1);break;case 2:s.OpenAlert("碎片+2"),console.log("碎片+2"),this.addPart(this.curTab,1);break;case 3:s.OpenAlert("经验+300"),console.log("经验+300"),e.getPlayerData().exp+=300;break;case 4:s.OpenAlert("经验+100"),console.log("经验+100"),e.getPlayerData().exp+=100;break;case 5:s.OpenAlert("金钱+2000"),console.log("金钱+2000"),e.getPlayerData().coin+=2e3;break;case 6:s.OpenAlert("金钱+5000"),console.log("金钱+5000"),e.getPlayerData().coin+=5e3}}D.toScale(a.parent,1,1.2,300,Laya.Ease.backIn,()=>{D.toScale(a.parent,1.2,1,300,Laya.Ease.backOut,()=>{D.toAlpha(a,0,.6,500,null,()=>{this.updateRewardBox()})})}),e.setPlayerData()})}addPart(t,s){e.getPlayerData().skinDriverParts[t-1]+=s,this.changeTab(t)}showGetBox(){this.getBtn.gray||(this.updateRewardBox(),this.getBox.visible=!0)}hideGetBox(){this.getBox.visible=!1}getBoxTween(){for(let t=3;t<10;t++){let e=this.getBox.getChildAt(t);D.toPosition(e,{y:e.y+(Math.random()>.5?10:-10)},2e3,null,null,!0)}}updateRewardBox(){let t=e.getPlayerData().watchVideoCount[this.curTab-1];this.lbGet.text="抽7次必得（"+t+"/7）";for(let t=3;t<10;t++){this.getBox.getChildAt(t).getChildAt(1).alpha=1==e.getPlayerData().rewardList[this.curTab-1][t-3]?.6:0}}}class Q extends Laya.Scene{constructor(){super(...arguments),this.chooseId=1,this.rewardList=[{type:1,name:"体力",value:1},{type:2,name:"金钱",value:500},{type:2,name:"金钱",value:1e3},{type:2,name:"金钱",value:1500},{type:1,name:"体力",value:1},{type:2,name:"金钱",value:2e3},{type:2,name:"金钱",value:2500},{type:2,name:"金钱",value:3e3}],this.isSkinUI=!1}onAwake(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.rewardPl.vScrollBarSkin=""}onOpened(t){if(this.changeCar(t?t.carId:1),a.addClickEvent(this.closeBtn,this,this.closeBtnCB),a.addClickEvent(this.leftBtn,this,this.selectCar,[!1],!1),a.addClickEvent(this.rightBtn,this,this.selectCar,[!0],!1),Laya.timer.frameLoop(1,this,this.myUpdate),0!=n.tryDriverId){let t=e.driverUpgradeData[n.tryDriverId-1];this.imgDriver.skin="driverUI/ksbs_img_tx"+n.tryDriverId+".png",this.lbName.text=t.name+"(试用)"}else{let t=e.getPlayerData().driverId;0!=t&&(this.imgDriver.skin="driverUI/ksbs_img_tx"+t+".png",this.lbName.text=e.driverUpgradeData[t-1].name)}t&&t.isSkin&&(this.isSkinUI=!0)}onClosed(t){Laya.timer.clearAll(this)}myUpdate(){this.coinNum.text=e.getPlayerData().coin.toString(),this.lbStrengthTime.visible=j.Share.currentStrength<j.Share.maxStrength,this.lbStrength.text=j.Share.currentStrength+"/"+j.Share.maxStrength,this.lbStrengthTime.visible&&j.Share.time&&(this.lbStrengthTime.text=j.Share.time)}closeBtnCB(){this.HideUI.play(),Laya.timer.once(750,this,()=>{this.isSkinUI?this.close():Laya.Scene.open("MyScenes/StartUI.scene")})}selectCar(t){this.chooseId+=t[0]?1:-1,this.chooseId<1?this.chooseId=9:this.chooseId>9&&(this.chooseId=1),this.changeCar(this.chooseId)}changeCar(t){this.chooseId=t;let s=e.carConfig[this.chooseId];this.lbCarName.text=s.CarName+" Lv"+e.getPlayerData().skinLvl[this.chooseId],this.lbGrade.text=s.grade,this.imgCarTitle.skin="startUI/ksbs_dk_clsx_"+s.level+".png";let i="expUI/cljs_img_car_"+t+".png";if(this.imgCar.skin=i,this.grayCar1.skin=i,this.grayCar2.skin=i,1==e.getPlayerData().skinArr[t])var a=8;else a=e.getPlayerData().skinParts[t];this.updateCarMask(t,a);let n=e.getPlayerData().exp;this.expProgress.height=0;for(let s=0;s<16;s++){let a=this.rewardPl.getChildAt(s+1),o=a.getChildByName("imgGet"),r=a.getChildByName("imgObj"),h=a.getChildByName("imgFont"),l=a.getChildByName("imgCar"),d=a.getChildByName("imgVideo"),c=a.getChildByName("progressBg"),f=c.getChildByName("imgProgress"),m=c.getChildByName("lbProgress"),y=h.getChildAt(0);y.visible=!1;let p=l.mask,u=100*(s+1)+1600*(t-1);if(a.offAllCaller(this),s%2==0){r.visible=!0,l.visible=!1,d.visible=!1;let i=s/2,p=r.getChildByName("lbObjName");if(p.text=this.rewardList[i].name,r.skin="体力"==this.rewardList[i].name?"expUI/cljs_icon_tl.png":"expUI/cljs_icon_jq.png",n>=u){c.visible=!1,h.visible=!0,1==e.getPlayerData().expRewardList[t-1][i]?(o.visible=!0,h.skin="expUI/cljs_tab_ylq_2.png"):(y.visible=!0,o.visible=!1,h.skin="expUI/cljs_tab_wjs_1.png",a.on(Laya.Event.CLICK,this,this.clickItem,[p.text,i,this.rewardList[i].value])),this.expProgress.height+=0==i?0:192}else o.visible=!1,c.visible=!0,h.visible=!1,m.text=n+"/"+u,f.width=n/u*200}else{r.visible=!1,l.visible=!0,l.skin=i;let x=Math.floor(s/2),g=-x%4*117,L=-116*Math.floor(x/4);if(l.pos(g,L),p.pos(1-g,1-L),n>=u){c.visible=!1,h.visible=!0,1==e.getPlayerData().carParts[t-1][x]?(o.visible=!0,h.skin="expUI/cljs_tab_ylq_2.png",l.gray=!1,d.visible=!1):(y.visible=!0,o.visible=!1,h.skin="expUI/cljs_tab_wjs_1.png",l.gray=!0,d.visible=!0,a.on(Laya.Event.CLICK,this,this.clickItem,["car",x])),this.expProgress.height+=192}else o.visible=!1,c.visible=!0,h.visible=!1,m.text=n+"/"+u,f.width=n/u*200,l.gray=!0,d.visible=!0}}}clickItem(t,i,a){console.log(t,i,a),"car"==t?O.showVideoAd(()=>{e.getPlayerData().carParts[this.chooseId-1][i]=1,e.getPlayerData().skinParts[this.chooseId]++,this.changeCar(this.chooseId),e.getPlayerData().skinParts[this.chooseId]>=8?(e.getPlayerData().skinArr[this.chooseId]=1,e.getPlayerData().skinId=this.chooseId,s.OpenAlert("赛车解锁")):s.OpenAlert("赛车碎片+1"),e.setPlayerData()},()=>{s.OpenAlert("看完视频领取奖励！")}):"体力"==t?(j.Share.addStrength(3,a),e.getPlayerData().expRewardList[this.chooseId-1][i]=1,e.setPlayerData(),this.changeCar(this.chooseId),s.OpenAlert("体力+"+a)):"金钱"==t&&(e.getPlayerData().expRewardList[this.chooseId-1][i]=1,e.changeCoin(a),this.changeCar(this.chooseId),s.OpenAlert("金钱+"+a))}updateCarMask(t,e){e>4?(this.carMask1.width=117*e+1,this.carMask2.width=117*(e-4)+1):(this.carMask1.width=117*e+1,this.carMask2.width=1)}}class $ extends Laya.Scene{constructor(){super(...arguments),this.unlockId=1}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight);let t=e.getPlayerData().skinId,s=e.carConfig[t];this.lbCarName.text=s.CarName+" Lv"+e.getPlayerData().skinLvl[t],this.lbGrade.text=s.grade,this.imgCarTitle.skin="startUI/ksbs_dk_clsx_"+s.level+".png";let i=K.Share.isWin;this.winTitle.skin=i?"finishUI/js_wz_tzcg.png":"finishUI/js_wz_tzsb.png",this.imgCondition.skin=i?"finishUI/js_wz_3.png":"finishUI/js_wz_2.png",this.imgRank.skin="finishUI/js_jb_"+K.Share.myRank+".png",this.upgradeBtn.visible=!i,this.reward=i?3e3:1e3,this.exp=i?400:200,e.getPlayerData().exp+=this.exp,e.changeCoin(this.reward),a.addClickEvent(this.nextBtn,this,this.closeCB),a.addClickEvent(this.upgradeBtn,this,this.goToUpgrade),a.addClickEvent(this.turnBtn,this,this.goToDriver),a.addClickEvent(this.carBtn,this,()=>{Laya.Scene.open("MyScenes/ExpUI.scene",!1,{carId:this.unlockId,isSkin:!0})}),this.lbReward.text="+"+this.reward,this.lbExp.text="+"+this.exp,this.carBtn.visible=!1;for(let t=1;t<10;t++)if(0==e.getPlayerData().skinArr[t]){this.carBtn.visible=!0,this.imgCar.skin="startUI/Car_"+(t+1)+".png",this.unlockId=t;let s=e.getPlayerData().exp,i=1600+1600*(this.unlockId-1);this.imgExpProgress.width=406*Math.min(1,s/i);break}i?Laya.timer.frameLoop(1,this,()=>{this.imgLight.rotation+=.5}):this.imgLight.visible=!1,A.inFinish()}onClosed(){Laya.timer.clearAll(this)}closeCB(t=0){n.tryDriverId=0,A.backToHome(()=>{K.Share.isWin&&(e.getPlayerData().grade++,e.setPlayerData()),K.Share.restartGame(),Laya.Scene.open("MyScenes/StartUI.scene",!0,{openUpgrade:t})})}goToUpgrade(){this.closeCB(1)}goToDriver(){this.closeCB(2)}}class tt extends Laya.Scene{onOpened(){this.bar.x=-315,Laya.timer.frameLoop(1,this,()=>{this.bar.x+=1,this.bar.x>0&&(this.bar.x=0)}),this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.loadJsonData(1),a.loadJson("res/configs/carConfig.json",t=>{e.carConfig=t})}onClosed(t){Laya.timer.clearAll(this),r.clearMask(this.imgBar)}loadJsonData(t){var s=()=>{Laya.Browser.onWeiXin?this.loadSubpackage():(K.Share.loadRoads(),this.loadRes())};n.IsLoadJSON?a.loadJson("res/configs/Level"+t+".json",i=>{if(e.levelDataArr.push(i),++t>n.LevelCount)return s(),void console.log("levelDataArr:",e.levelDataArr);this.loadJsonData(t)}):s()}loadSubpackage(){Laya.Browser.window.wx.loadSubpackage({name:"unity",success:t=>{this.loadRes()},fail:t=>{this.loadSubpackage()}}).onProgressUpdate(t=>{console.log("下载进度",t.progress),console.log("已经下载的数据长度",t.totalBytesWritten),console.log("预期需要下载的数据总长度",t.totalBytesExpectedToWrite)}),Laya.Browser.window.wx.loadSubpackage({name:"pack",success:t=>{K.Share.loadRoads()},fail:t=>{}}),Laya.Browser.window.wx.loadSubpackage({name:"sound",success:t=>{},fail:t=>{}})}loadRes(){Laya.timer.once(500,this,this.onComplete)}onComplete(){i.instance.initLoading(()=>{this.bar.x=0,Laya.timer.once(100,this,()=>{K.Share.initScene()})})}}class et extends Laya.Script{constructor(){super(),this.startY=0}onAwake(){this.myOwner=this.owner,this.startY=this.myOwner.y,this.startTween()}startTween(){Laya.Tween.to(this.myOwner,{y:this.startY+50},1e3,Laya.Ease.sineInOut,new Laya.Handler(this,()=>{Laya.Tween.to(this.myOwner,{y:this.startY},1e3,Laya.Ease.sineInOut,new Laya.Handler(this,()=>{this.startTween()}))}))}}class st extends Laya.Scene{constructor(){super(...arguments),this.curProgress=0,this.allProgress=5}onAwake(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.matchList.renderHandler=new Laya.Handler(this,(t,e)=>{let s=this.matchList.array[e],i=t.getChildAt(0),a=t.getChildAt(1),n=t.getChildAt(2),o=t.getChildAt(3),r=t.getChildAt(4);r.text=s.carGrade,i.skin=s.carLevelSkin,n.skin=s.carSkin,0==s.waitTime?(a.visible=!1,n.visible=!0,o.visible=!0,i.visible=!0,r.visible=!0,this.curProgress++):(a.visible=!0,n.visible=!1,o.visible=!1,i.visible=!1,r.visible=!1),this.calcTime(s.waitTime,a,n,o,i,r)},null,!1);let t=e.getPlayerData().skinId,s=e.carConfig[t];this.lbCarName.text=s.CarName+" Lv"+e.getPlayerData().skinLvl[t],this.lbGrade.text=s.grade,this.imgCarTitle.skin="startUI/ksbs_dk_clsx_"+s.level+".png",this.imgCar.skin="startUI/Car_"+(t+1)+".png";let i=[0,1,2,3,4,5,6,7,8,9];i.splice(i.indexOf(t),1),(i=i.sort((t,e)=>Math.random()-.5)).splice(5,4),K.Share.aiIds=i;let a=[];for(let t=0;t<i.length;t++){let s=e.carConfig[i[t]],n={carId:i[t],carSkin:"startUI/Car_"+(i[t]+1)+".png",carGrade:s.grade,carLevelSkin:"matchUI/pp_clsx_"+s.level+".png",waitTime:Math.random()>.8?0:2e3*Math.random()+1e3};a.push(n)}if(this.matchList.array=a,this.lbTime.text="0%",0!=n.tryDriverId){let t=e.driverUpgradeData[n.tryDriverId-1];this.imgDriver.skin="driverUI/ksbs_img_tx"+n.tryDriverId+".png",this.lbName.text=t.name+"(试用)"}else{let t=e.getPlayerData().driverId;0!=t&&(this.imgDriver.skin="driverUI/ksbs_img_tx"+t+".png",this.lbName.text=e.driverUpgradeData[t-1].name)}}onOpened(t){this.frameProgress=this.curProgress/this.allProgress*100,Laya.timer.frameLoop(1,this,()=>{let t=(this.curProgress+1)/this.allProgress*100;if(this.frameProgress+=.2,this.frameProgress>t&&(this.frameProgress=t),this.frameProgress>=100)return this.lbTime.text="100%",Laya.timer.clearAll(this),void Laya.timer.once(1e3,this,()=>{Laya.Scene.open("MyScenes/GameUI.scene")});this.lbTime.text=this.frameProgress.toFixed(1)+"%"})}calcTime(t,e,s,i,a,n){let o=0,r=()=>{if((o+=Laya.timer.delta)>t){Laya.timer.clear(this,r),e.visible=!1,s.visible=!0,i.visible=!0,a.visible=!0,n.visible=!0;let t=s.getChildAt(0);Laya.Tween.to(t,{scaleX:0},200,null,Laya.Handler.create(this,()=>{this.curProgress++,this.frameProgress+=1/(this.allProgress+2)*100}))}else;};Laya.timer.frameLoop(1,this,r),this.playProgress(t,e.getChildAt(0),e)}playProgress(t,e,s){let i=0,a=new Laya.Sprite;a.size(e.width,e.height),a.graphics.clear(),a.graphics.drawPie(e.width/2,e.height/2,e.width/2,-90,360*i-90,"#ffeb0d"),e.mask=a;var n=Laya.timer.currTimer;let o=()=>{var r=Laya.timer.currTimer-n;r>=t?(i=1,s.visible=!1,e.visible=!1,Laya.timer.clear(this,o)):i=r/t,a.graphics.clear(),a.graphics.drawPie(e.width/2,e.height/2,e.width/2,-90,360*i-90,"#ffeb0d")};Laya.timer.loop(1,this,o)}}class it extends Laya.Scene{onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),a.addClickEvent(this.closeBtn,this,this.close,null,!1),a.addClickEvent(this.musicBtn,this,this.musicClick),a.addClickEvent(this.soundBtn,this,this.soundClick),a.addClickEvent(this.vibrateBtn,this,this.vibrateClick),this.updateData()}onClosed(t){Laya.timer.clearAll(this)}updateData(){let t=e.getPlayerData().option;this.musicBtn.skin=t[0]?"commonUI/lxsy_btn_k.png":"commonUI/lxsy_btn_g.png",this.soundBtn.skin=t[1]?"commonUI/lxsy_btn_k.png":"commonUI/lxsy_btn_g.png",this.vibrateBtn.skin=t[2]?"commonUI/lxsy_btn_k.png":"commonUI/lxsy_btn_g.png"}musicClick(){let t=e.getPlayerData().option;t[0]=1==t[0]?0:1,e.setPlayerData(),this.musicBtn.skin=t[0]?"commonUI/lxsy_btn_k.png":"commonUI/lxsy_btn_g.png",t[0]?i.instance.playMusic("bgm"):i.instance.stopMusic()}soundClick(){let t=e.getPlayerData().option;t[1]=1==t[1]?0:1,e.setPlayerData(),this.soundBtn.skin=t[1]?"commonUI/lxsy_btn_k.png":"commonUI/lxsy_btn_g.png"}vibrateClick(){let t=e.getPlayerData().option;t[2]=1==t[2]?0:1,e.setPlayerData(),this.vibrateBtn.skin=t[2]?"commonUI/lxsy_btn_k.png":"commonUI/lxsy_btn_g.png"}}class at extends Laya.Scene{constructor(){super(...arguments),this.chooseId=0,this.curTab=y.upgradeTab,this.maxValue=3}onAwake(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight)}onOpened(){if(a.addClickEvent(this.closeBtn,this,this.closeBtnCB),a.addClickEvent(this.upgradeTab,this,this.changeTab,[y.upgradeTab]),a.addClickEvent(this.wheelTab,this,this.changeTab,[y.wheelTab]),a.addClickEvent(this.tailTab,this,this.changeTab,[y.tailTab]),a.addClickEvent(this.colorTab,this,this.changeTab,[y.colorTab]),a.addClickEvent(this.leftBtn,this,this.changeCar,[!1],!1),a.addClickEvent(this.rightBtn,this,this.changeCar,[!0],!1),a.addClickEvent(this.upgradeBtn,this,this.upgradeClick),a.addClickEvent(this.videoUpgradeBtn,this,this.videoUpgradeClick),a.addClickEvent(this.unlockBtn,this,()=>{Laya.Scene.open("MyScenes/ExpUI.scene",!1,{carId:this.chooseId,isSkin:!0})}),this.initList(),this.chooseId=e.getPlayerData().skinId,this.changeTab([y.upgradeTab]),this.selectCar(),K.Share.playerAnim.play("CameraTweenToShop"),Laya.timer.frameLoop(1,this,this.myUpdate),0!=n.tryDriverId){let t=e.driverUpgradeData[n.tryDriverId-1];this.imgDriver.skin="driverUI/ksbs_img_tx"+n.tryDriverId+".png",this.lbName.text=t.name+"(试用)"}else{let t=e.getPlayerData().driverId;0!=t&&(this.imgDriver.skin="driverUI/ksbs_img_tx"+t+".png",this.lbName.text=e.driverUpgradeData[t-1].name)}}onClosed(t){Laya.timer.clearAll(this)}upgradeClick(){let t=Number(this.lbCost.text);e.getPlayerData().coin>=t&&(e.changeCoin(-t),this.updateCar())}updateCar(){let t=e.carUpgradeData[this.chooseId],s=e.getPlayerData().skinLvl[this.chooseId];this.Upgrade.play(0,!1),Laya.timer.once(166.7,this,()=>{this.updateCtrlValue(t,s+1)}),Laya.timer.once(250.05,this,()=>{this.updateSpdValue(t,s+1)}),Laya.timer.once(333.4,this,()=>{this.updateAcceValue(t,s+1)}),e.getPlayerData().skinLvl[this.chooseId]+=1,e.setPlayerData();let i=t.upgradeCost+(s-1)*t.upgradeCostStep;this.lbCost.text=i.toString();let a=e.carConfig[this.chooseId];this.lbCarName.text=a.CarName+" Lv"+e.getPlayerData().skinLvl[this.chooseId],this.showFX()}showFX(){K.Share.upgradeFX.active&&(K.Share.upgradeFX.active=!1),K.Share.upgradeFX.active=!0,Laya.timer.clear(this,this.hideFX),Laya.timer.once(1e3,this,this.hideFX)}hideFX(){K.Share.upgradeFX.active=!1}videoUpgradeClick(){O.showVideoAd(()=>{for(let t=0;t<5;t++){let e=420*t;Laya.timer.once(e,this,()=>{this.updateCar()})}})}changeCar(t){this.chooseId+=t[0]?1:-1,this.selectCar()}selectCar(){this.chooseId<0?this.chooseId=9:this.chooseId>9&&(this.chooseId=0),this.skinList.selectedIndex=-1,this.imgLock.visible=0==e.getPlayerData().skinArr[this.chooseId],this.imgUnlock.visible=this.curTab==y.upgradeTab&&!this.imgLock.visible,this.skinList.visible=this.curTab!=y.upgradeTab&&!this.imgLock.visible;let t=e.carConfig[this.chooseId];this.lbCarName.text=t.CarName+" Lv"+e.getPlayerData().skinLvl[this.chooseId],this.lbGrade.text=t.grade,this.imgCarTitle.skin="startUI/ksbs_dk_clsx_"+t.level+".png",K.Share.updateSkin(this.chooseId),this.curTab==y.wheelTab?this.updateWheelData():this.curTab==y.tailTab?this.updateTailData():this.curTab==y.colorTab?this.updateColorData():this.updateUpgradeData()}updateUpgradeData(){let t=e.carUpgradeData[this.chooseId],s=e.getPlayerData().skinLvl[this.chooseId];this.updateCtrlValue(t,s),this.updateSpdValue(t,s),this.updateAcceValue(t,s);let i=t.upgradeCost+(s-1)*t.upgradeCostStep;this.lbCost.text=i.toString()}updateCtrlValue(t,e){let s=this.getUpgradeData(t.ctrl,t.addCtrl,e),i=this.getUpgradeData(t.ctrl,t.addCtrl,e+1);this.imgCurCtrl.width=s/this.maxValue*180,this.imgNextCtrl.width=i/this.maxValue*180,this.lbCtrl.text=s.toFixed(2)}updateSpdValue(t,e){let s=this.getUpgradeData(t.spd,t.addSpd,e),i=this.getUpgradeData(t.spd,t.addSpd,e+1);this.imgCurSpd.width=s/this.maxValue*180,this.imgNextSpd.width=i/this.maxValue*180,this.lbSpd.text=s.toFixed(2)}updateAcceValue(t,e){let s=this.getUpgradeData(t.acce,t.addAcce,e),i=this.getUpgradeData(t.acce,t.addAcce,e+1);this.imgCurAcce.width=s/this.maxValue*180,this.imgNextAcce.width=i/this.maxValue*180,this.lbAcce.text=s.toFixed(2)}getUpgradeData(t,e,s){return 1==s?t:this.getUpgradeData(t,e,s-1)+e}changeTab(t){this.skinList.selectedIndex=-1;for(let e in y){let s=this[e].skin.split("."),i=s[0].slice(0,s[0].length-1);this[e].skin=e==t[0]?i+"2.png":i+"1.png"}let s=!1;switch(t[0]){case y.upgradeTab:s=!0;break;case y.wheelTab:this.skinList.repeatX=6,this.updateWheelData();break;case y.tailTab:this.skinList.repeatX=11,this.updateTailData();break;case y.colorTab:this.skinList.repeatX=10,this.updateColorData()}this.imgCtrl.visible=s,this.imgSpeed.visible=s,this.imgAcce.visible=s,this.imgLock.visible=0==e.getPlayerData().skinArr[this.chooseId],this.skinList.visible=!s&&!this.imgLock.visible,this.imgUnlock.visible=s&&!this.imgLock.visible,this.curTab!=y.tailTab&&t==y.tailTab?K.Share.playerAnim.play("CameraTweenToTail"):this.curTab==y.tailTab&&t!=y.tailTab&&K.Share.playerAnim.play("CameraTweenToWheel"),this.curTab=t}closeBtnCB(){this.HideUI.play(),K.Share.playerAnim.play("CameraTweenToHome"),Laya.timer.once(500,this,()=>{Laya.Scene.open("MyScenes/StartUI.scene")})}initList(){this.skinList.renderHandler=new Laya.Handler(this,(t,e)=>{this.updateCellItem(t,e)},null,!1),this.skinList.selectHandler=new Laya.Handler(this,t=>{if(-1==t)return;if(this.skinList.array[t].isLock)O.showVideoAd(()=>{if(this.curTab==y.wheelTab){let e=this.wheelIds[t];this.changeWheel(e,!0)}else this.curTab==y.tailTab?this.changeTail(t,!0):this.curTab==y.colorTab&&this.changeColor(t+1,!0)});else if(this.curTab==y.wheelTab){let e=this.wheelIds[t];this.changeWheel(e)}else this.curTab==y.tailTab?this.changeTail(t):this.curTab==y.colorTab&&this.changeColor(t+1)},null,!1),this.skinList.selectEnable=!0,this.skinList.elasticEnabled=!0,this.skinList.hScrollBarSkin=""}updateCellItem(t,e){let s=t,i=t.getChildAt(0),a=t.getChildAt(1),n=a.getChildAt(0),o=t.getChildAt(2),r=this.skinList.array[e];s.bottom=0,r.isLock?(s.skin="skinUI/clgz_btn_xzk_1.png",n.skin="skinUI/clgz_btn_clts_1.png",o.skin="skinUI/tab_sp_1.png"):(s.skin="skinUI/clgz_btn_xzk_2.png",n.skin="skinUI/clgz_btn_clts_2.png",r.isSelect?(o.skin="skinUI/tab_sp_2.png",s.bottom=10):o.skin="skinUI/tab_yjs_1.png"),a.visible=r.isColor,r.isColor?a.bgColor=r.color:i.skin=r.iconSkin}changeWheel(t,s=!1){s&&e.getPlayerData().skinWheel[this.chooseId].push(t),e.getPlayerData().wheelId[this.chooseId]=t,e.setPlayerData(),K.Share.createWheel(K.Share.showCar,t),this.updateWheelData()}changeTail(t,s=!1){s&&e.getPlayerData().skinTail[this.chooseId].push(t),e.getPlayerData().tailId[this.chooseId]=t,e.setPlayerData(),K.Share.createTail(K.Share.showCar,t),this.updateTailData()}changeColor(t,s=!1){s&&e.getPlayerData().skinColor[this.chooseId].push(t),e.getPlayerData().colorId[this.chooseId]=t,e.setPlayerData(),K.Share.createColor(K.Share.showCar,this.chooseId,t),this.updateColorData()}updateWheelData(){let t=[],s=this.chooseId;switch(s){case 0:var i=[1,2,3,4,5,6];break;case 1:i=[2,3,4,5,6,1];break;case 2:i=[3,4,5,6,1,2];break;case 3:i=[4,5,6,1,2,3];break;case 4:i=[5,6,1,2,3,4];break;case 5:i=[6,1,2,3,4,5];break;case 6:i=[1,2,3,4,5,6];break;case 7:i=[2,3,4,5,6,1];break;case 8:i=[3,4,5,6,1,2];break;case 9:i=[4,5,6,1,2,3]}this.wheelIds=i;for(let a=0;a<6;a++){let n={isColor:!1,isSelect:e.getPlayerData().wheelId[s]==i[a],isLock:-1==e.getPlayerData().skinWheel[s].indexOf(i[a]),iconSkin:"skinUI/icon_wheel_"+i[a]+".png"};t.push(n)}this.skinList.array=t}updateTailData(){let t=[],s=this.chooseId;for(let i=0;i<11;i++){let a={isColor:!1,isSelect:e.getPlayerData().tailId[s]==i,isLock:-1==e.getPlayerData().skinTail[s].indexOf(i),iconSkin:0==i?"":"skinUI/icon_tail_"+i+".png"};t.push(a)}this.skinList.array=t}updateColorData(){let t=[],s=this.chooseId;for(let i=0;i<10;i++){let a={isColor:!0,isSelect:e.getPlayerData().colorId[s]==i+1,isLock:-1==e.getPlayerData().skinColor[s].indexOf(i+1),color:e.carConfig[s]["CarColor"+(i+1)]};t.push(a)}this.skinList.array=t}myUpdate(){this.coinNum.text=e.getPlayerData().coin.toString(),this.lbStrengthTime.visible=j.Share.currentStrength<j.Share.maxStrength,this.lbStrength.text=j.Share.currentStrength+"/"+j.Share.maxStrength,this.lbStrengthTime.visible&&j.Share.time&&(this.lbStrengthTime.text=j.Share.time)}}!function(t){t.upgradeTab="upgradeTab",t.wheelTab="wheelTab",t.tailTab="tailTab",t.colorTab="colorTab"}(y||(y={}));class nt extends Laya.Scene{constructor(){super(...arguments),this.chooseId=0,this.unlockId=1,this.driverId=0}showLight(){this.imgLight.x=-270,this.lightMask.x=270;var t=()=>{this.lightMask.x=-this.imgLight.x};D.toPosition(this.imgLight,{x:350,y:this.imgLight.y},1e3,null,()=>{Laya.timer.clear(this,t),Laya.timer.once(5e3,this,this.showLight)}),Laya.timer.frameLoop(1,this,t)}showRedPoint(){this.imgRedPoint.visible=!0,D.toScale(this.imgRedPoint,1,1.1,1e3,null,null,!0,!0)}onOpened(t){i.instance.playMusic("bgm"),this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),a.addClickEvent(this.startBtn,this,this.startBtnCB),a.addClickEvent(this.optionBtn,this,this.showOptionClick,null,!1),a.addClickEvent(this.changeBtn,this,this.skinBtnCB),a.addClickEvent(this.carBtn,this,this.carBtnCB,null,!1),Laya.timer.frameLoop(1,this,this.myUpdate),a.addClickEvent(this.leftBtn,this,this.changeCar,[!1],!1),a.addClickEvent(this.rightBtn,this,this.changeCar,[!0],!1),a.addClickEvent(this.driverBtn,this,this.driverBtnCB),this.carBtn.visible=!1;for(let t=1;t<10;t++)if(0==e.getPlayerData().skinArr[t]){this.carBtn.visible=!0,this.imgCar.skin="startUI/Car_"+(t+1)+".png",this.unlockId=t;let s=e.getPlayerData().exp,i=1600+1600*(this.unlockId-1);this.imgExpProgress.width=406*Math.min(1,s/i);break}Laya.timer.once(5e3,this,this.showLight),A.inHome(),this.chooseId=e.getPlayerData().skinId,this.selectCar(),t&&(1==t.openUpgrade?Laya.timer.once(200,this,()=>{this.skinBtnCB()}):2==t.openUpgrade&&Laya.timer.once(200,this,()=>{this.driverBtnCB()}))}changeCar(t){this.chooseId+=t[0]?1:-1,this.selectCar()}selectCar(){this.chooseId<0?this.chooseId=9:this.chooseId>9&&(this.chooseId=0);let t=e.carConfig[this.chooseId];this.lbCarName.text=t.CarName+" Lv"+e.getPlayerData().skinLvl[this.chooseId],this.lbGrade.text=t.grade,this.imgCarTitle.skin="startUI/ksbs_dk_clsx_"+t.level+".png",K.Share.updateSkin(this.chooseId)}onClosed(){Laya.timer.clearAll(this)}startBtnCB(){j.Share.subStrength(t=>{t?A.startGame(()=>{Laya.Scene.open("MyScenes/MatchUI.scene")}):(Laya.Scene.open("MyScenes/StrengthUI.scene",!1),A.inShop())})}showOptionClick(){Laya.Scene.open("MyScenes/OptionUI.scene",!1)}skinBtnCB(){Laya.Scene.open("MyScenes/SkinUI.scene"),A.inShop()}carBtnCB(){Laya.Scene.open("MyScenes/ExpUI.scene",!0,{carId:this.unlockId}),A.inShop()}driverBtnCB(){Laya.Scene.open("MyScenes/DriverUI.scene",!1),A.inShop()}myUpdate(){if(this.coinNum.text=e.getPlayerData().coin.toString(),this.imgGear.rotation+=.5,this.lbStrengthTime.visible=j.Share.currentStrength<j.Share.maxStrength,this.lbStrength.text=j.Share.currentStrength+"/"+j.Share.maxStrength,this.lbStrengthTime.visible&&j.Share.time&&(this.lbStrengthTime.text=j.Share.time),0!=n.tryDriverId){let t=e.driverUpgradeData[n.tryDriverId-1];this.imgDriver.skin="driverUI/ksbs_img_tx"+n.tryDriverId+".png",this.lbName.text=t.name+"(试用)"}else{let t=e.getPlayerData().driverId;this.driverId!=t&&(this.imgDriver.skin="driverUI/ksbs_img_tx"+t+".png",this.driverId=t,this.lbName.text=e.driverUpgradeData[t-1].name)}}}class ot extends Laya.Scene{onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),a.addClickEvent(this.closeBtn,this,this.close,null,!1),a.addClickEvent(this.videoBtn,this,this.videoClick)}onClosed(t){Laya.timer.clearAll(this),A.inHome()}videoClick(){O.showVideoAd(()=>{j.Share.addStrength(1,10),this.close()})}}class rt{static getRangeNumer(t,e){return Math.random()*(e-t)+t}static addClickEvent(t,e,s,i,a){if(t.offAllCaller(e),t instanceof Laya.Button&&!a){let a=t=>{s&&s.call(e,t)};t.on(Laya.Event.CLICK,e,a,[i])}else{let a=60,n=1,o=t.scaleX*n,r=t.scaleY*n,h=.9*n,l=!1,d=e=>{l=!0,Laya.Tween.to(t,{scaleX:h,scaleY:h},a)};t.on(Laya.Event.MOUSE_DOWN,e,d,[i]);let c=i=>{0!=l&&(l=!1,Laya.Tween.to(t,{scaleX:o,scaleY:r},a,null,new Laya.Handler(e,()=>{s&&s.call(e,i)})))};t.on(Laya.Event.MOUSE_UP,e,c,[i]);let f=e=>{Laya.Tween.to(t,{scaleX:o,scaleY:r},a)};t.on(Laya.Event.MOUSE_OUT,e,f,[i])}}}class ht extends Laya.Scene{constructor(){super()}onOpened(t){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),rt.addClickEvent(this.remenBtn,this,this.remenCB),rt.addClickEvent(this.drawBtn,this,this.remenCB),this.remenBtn.visible=b.data.front_moreGame_switch&&(1==b.homeMoreGameType||2==b.homeMoreGameType),this.drawBtn.visible=b.data.front_moreGame_switch&&(0==b.homeMoreGameType||2==b.homeMoreGameType)}onClosed(){}remenCB(){A.moreGame()}}class lt extends Laya.Script{constructor(){super(),this.myScale=null}onAwake(){this.myOwnwer=this.owner,this.myScale=new Laya.Vector2(this.myOwnwer.scaleX,this.myOwnwer.scaleY),this.scaleLoop(this.myOwnwer,.1,400)}scaleLoop(t,e,s){Laya.Tween.to(t,{scaleX:this.myScale.x+e,scaleY:this.myScale.y+e},s,null,new Laya.Handler(this,()=>{Laya.Tween.to(t,{scaleX:this.myScale.x,scaleY:this.myScale.y},s,null,new Laya.Handler(this,()=>{this.scaleLoop(t,e,s)}))}))}}class dt extends Laya.Scene{constructor(){super(),this.ccb=null,this.onShowCB=null,this.clickCount=0,this.index=m.Remen_Loading,this.isWuchu=0}onAwake(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.bg.size(Laya.stage.displayWidth,Laya.stage.displayHeight)}onOpened(t){t&&t.ccb&&(this.ccb=t.ccb),t&&null!=t.index&&(this.index=t.index),this.clickCount=0,rt.addClickEvent(this.btnContinue,this,this.btnContinueCB),O.visibleFullGridAd(!0),b.data.front_remen_banner_switch&&this.showHide(),this.onShowCB=(()=>{this.close()}),Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(this.onShowCB)}onClosed(){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(this.onShowCB),Laya.timer.clearAll(this),O.hideBannerAd(),O.visibleFullGridAd(!1),Laya.timer.once(100,this,()=>{this.ccb&&this.ccb(),b.data.front_interstitial_afterRemen_switch&&(this.index!=m.Remen_Loading&&this.index!=m.Remen_Over&&this.index!=m.Remen_Finish||O.showInterstitialAd())})}showHide(){O.hideBannerAd(),Laya.timer.once(1e3*b.data.front_remen_banner_showHide_time,this,()=>{O.showBannerAd(),Laya.timer.once(1e3*b.data.front_remen_banner_showHide_time,this,this.showHide)})}btnContinueCB(){this.clickCount++,this.clickCount>=b.data.front_remen_click_count&&this.close()}}class ct{constructor(){}static init(){var t=Laya.ClassUtils.regClass;t("View/DriverUI.ts",q),t("View/ExpUI.ts",Q),t("View/FinishUI.ts",$),t("View/GameUI.ts",X),t("View/LoadingUI.ts",tt),t("Mod/UpDownLoop.ts",et),t("View/MatchUI.ts",st),t("View/OptionUI.ts",it),t("View/SkinUI.ts",at),t("View/StartUI.ts",nt),t("View/StrengthUI.ts",ot),t("SGSDK/SGHomeUI.ts",ht),t("SGSDK/SGScale.ts",lt),t("SGSDK/SGRemen.ts",dt)}}ct.width=1334,ct.height=750,ct.scaleMode="fixedauto",ct.screenMode="horizontal",ct.alignV="middle",ct.alignH="center",ct.startScene="SGScene/SGHomeUI.scene",ct.sceneRoot="",ct.debug=!1,ct.stat=!1,ct.physicsDebug=!1,ct.exportSceneToJson=!0,ct.init();new class{constructor(){window.Laya3D?Laya3D.init(ct.width,ct.height):Laya.init(ct.width,ct.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=ct.scaleMode,Laya.stage.screenMode=ct.screenMode,Laya.stage.alignV=ct.alignV,Laya.stage.alignH=ct.alignH,Laya.URL.exportSceneToJson=ct.exportSceneToJson,Laya.stage.useRetinalCanvas=!0,(ct.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),ct.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),ct.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){new K}}}();